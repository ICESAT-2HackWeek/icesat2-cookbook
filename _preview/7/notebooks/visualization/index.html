<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Interactive Visualizion with Open Altimetry &amp; Google Earth Engine - ICESat-2 Tutorials</title><meta property="og:title" content="Interactive Visualizion with Open Altimetry &amp; Google Earth Engine - ICESat-2 Tutorials"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg"/><meta property="og:image" content="/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg"/><link rel="stylesheet" href="/icesat2-cookbook/_preview/7/build/_assets/app-5WKS5EPQ.css"/><link rel="stylesheet" href="/icesat2-cookbook/_preview/7/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/icesat2-cookbook/_preview/7/favicon.ico"/><link rel="stylesheet" href="/icesat2-cookbook/_preview/7/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="https://projectpythia.org"><div class="p-1 mr-3"><img src="/icesat2-cookbook/_preview/7/build/config-item-24692dda-5ee59714381f8864fbb912f4a110f38f.svg" class="h-9 dark:hidden" height="2.25rem"/><img src="/icesat2-cookbook/_preview/7/build/config-item-84d6d338-d059cc5760005243331965be4dafd0eb.svg" class="hidden h-9 dark:block" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"><div class="relative inline-block mx-2 grow-0"><a href="https://projectpythia.org" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Home</a></div><div class="relative inline-block mx-2 grow-0"><a href="https://foundations.projectpythia.org" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Foundations</a></div><div class="relative inline-block mx-2 grow-0"><a href="https://cookbooks.projectpythia.org/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Cookbooks</a></div><div class="relative inline-block mx-2 grow-0"><a href="https://projectpythia.org/resource-gallery/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Resources</a></div><div class="relative inline-block mx-2 grow-0"><a href="https://projectpythia.org/#join-us" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Community</a></div></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R74op:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"><div class="relative" data-headlessui-state=""><div><button class="flex text-sm bg-transparent rounded-full focus:outline-none" id="headlessui-menu-button-:Rr4op:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Open Menu</span><div class="flex items-center text-stone-200 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="p-1"><path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="hidden sm:block"><a href="https://projectpythia.org" target="_blank" rel="noopener noreferrer" class="inline-block px-4 py-2 mx-1 mt-0 leading-none border rounded text-md border-stone-700 dark:border-white text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 hover:bg-neutral-100">Project Pythia</a></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"><a href="https://projectpythia.org" target="_blank" rel="noopener noreferrer" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Home</a><a href="https://foundations.projectpythia.org" target="_blank" rel="noopener noreferrer" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Foundations</a><a href="https://cookbooks.projectpythia.org/" target="_blank" rel="noopener noreferrer" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Cookbooks</a><a href="https://projectpythia.org/resource-gallery/" target="_blank" rel="noopener noreferrer" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Resources</a><a href="https://projectpythia.org/#join-us" target="_blank" rel="noopener noreferrer" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Community</a></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="ICESat-2 Tutorials" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/icesat2-cookbook/_preview/7/">ICESat-2 Tutorials</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Preamble" class="block break-words rounded py-2 grow cursor-pointer">Preamble</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmp8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmp8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Foundations" class="block break-words rounded py-2 grow cursor-pointer">Foundations</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rup8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rup8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Example Workflows" class="block break-words rounded py-2 grow cursor-pointer">Example Workflows</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16p8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16p8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer" class="opacity-50 hover:opacity-100 text-inherit hover:text-inherit" aria-label="Content License: Creative Commons Attribution 4.0 International (CC-BY-4.0)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mx-1"><title>Content License: Creative Commons Attribution 4.0 International (CC-BY-4.0)</title><path d="M12 2.2c2.7 0 5 1 7 2.9.9.9 1.6 2 2.1 3.1.5 1.2.7 2.4.7 3.8 0 1.3-.2 2.6-.7 3.8-.5 1.2-1.2 2.2-2.1 3.1-1 .9-2 1.7-3.2 2.2-1.2.5-2.5.7-3.7.7s-2.6-.3-3.8-.8c-1.2-.5-2.2-1.2-3.2-2.1s-1.6-2-2.1-3.2-.8-2.4-.8-3.7c0-1.3.2-2.5.7-3.7S4.2 6 5.1 5.1C7 3.2 9.3 2.2 12 2.2zM12 4c-2.2 0-4.1.8-5.6 2.3C5.6 7.1 5 8 4.6 9c-.4 1-.6 2-.6 3s.2 2.1.6 3c.4 1 1 1.8 1.8 2.6S8 19 9 19.4c1 .4 2 .6 3 .6s2.1-.2 3-.6c1-.4 1.9-1 2.7-1.8 1.5-1.5 2.3-3.3 2.3-5.6 0-1.1-.2-2.1-.6-3.1-.4-1-1-1.8-1.7-2.6C16.1 4.8 14.2 4 12 4zm-.1 6.4l-1.3.7c-.1-.3-.3-.5-.5-.6-.2-.1-.4-.2-.6-.2-.9 0-1.3.6-1.3 1.7 0 .5.1.9.3 1.3.2.3.5.5 1 .5.6 0 1-.3 1.2-.8l1.2.6c-.3.5-.6.9-1.1 1.1-.5.3-1 .4-1.5.4-.9 0-1.6-.3-2.1-.8-.5-.6-.8-1.3-.8-2.3 0-.9.3-1.7.8-2.2.6-.6 1.3-.8 2.1-.8 1.2 0 2.1.4 2.6 1.4zm5.6 0l-1.3.7c-.1-.3-.3-.5-.5-.6-.2-.1-.4-.2-.6-.2-.9 0-1.3.6-1.3 1.7 0 .5.1.9.3 1.3.2.3.5.5 1 .5.6 0 1-.3 1.2-.8l1.2.6c-.3.5-.6.9-1.1 1.1-.4.2-.9.3-1.4.3-.9 0-1.6-.3-2.1-.8s-.8-1.3-.8-2.2c0-.9.3-1.7.8-2.2.5-.5 1.2-.8 2-.8 1.2 0 2.1.4 2.6 1.4z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1"><title>Credit must be given to the creator</title><path d="M12 2.2c2.7 0 5 .9 6.9 2.8 1.9 1.9 2.8 4.2 2.8 6.9s-.9 5-2.8 6.8c-2 1.9-4.3 2.9-7 2.9-2.6 0-4.9-1-6.9-2.9-1.8-1.7-2.8-4-2.8-6.7s1-5 2.9-6.9C7 3.2 9.3 2.2 12 2.2zM12 4c-2.2 0-4.1.8-5.6 2.3C4.8 8 4 9.9 4 12c0 2.2.8 4 2.4 5.6C8 19.2 9.8 20 12 20c2.2 0 4.1-.8 5.7-2.4 1.5-1.5 2.3-3.3 2.3-5.6 0-2.2-.8-4.1-2.3-5.7C16.1 4.8 14.2 4 12 4zm2.6 5.6v4h-1.1v4.7h-3v-4.7H9.4v-4c0-.2.1-.3.2-.4.1-.2.2-.2.4-.2h4c.2 0 .3.1.4.2.2.1.2.2.2.4zm-4-2.5c0-.9.5-1.4 1.4-1.4s1.4.5 1.4 1.4c0 .9-.5 1.4-1.4 1.4s-1.4-.5-1.4-1.4z"></path></svg></a><a href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener noreferrer" title="Code License: Apache License 2.0 (Apache-2.0)" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="mx-1 inline-block opacity-60 hover:opacity-100 hover:text-[#599F46]"><path d="M13.2 15.6c1.4-.5 2.1-1.6 2.1-3.3S13.8 8.9 12 8.9c-1.9 0-3.3 1.6-3.3 3.3 0 1.8.8 3 2.2 3.4l-2.3 5.9c-3.1-.8-6.3-4.6-6.3-9.3 0-5.5 4.3-10 9.7-10s9.8 4.5 9.8 10c0 4.7-3.1 8.5-6.3 9.3l-2.3-5.9z"></path></svg></a><a href="https://en.wikipedia.org/wiki/Open_access" target="_blank" rel="noopener noreferrer" title="Open Access" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="mr-1 inline-block opacity-60 hover:opacity-100 hover:text-[#E18435]"><path d="M17.1 12.6h-2V7.5c0-1.7-1.4-3.1-3-3.1-.8 0-1.6.3-2.2.9-.6.5-.9 1.3-.9 2.2v.7H7v-.7c0-1.4.5-2.7 1.5-3.7s2.2-1.5 3.6-1.5 2.6.5 3.6 1.5 1.5 2.3 1.5 3.7v5.1z"></path><path d="M12 21.8c-.8 0-1.6-.2-2.3-.5-.7-.3-1.4-.8-1.9-1.3-.6-.6-1-1.2-1.3-2-.3-.8-.5-1.6-.5-2.4s.2-1.6.5-2.4c.3-.7.7-1.4 1.3-2s1.2-1 1.9-1.3c.7-.3 1.5-.5 2.3-.5.8 0 1.6.2 2.3.5.7.3 1.4.8 1.9 1.3.6.6 1 1.2 1.3 2 .3.8.5 1.6.5 2.4s-.2 1.6-.5 2.4c-.3.7-.7 1.4-1.3 2-.6.6-1.2 1-1.9 1.3-.7.3-1.5.5-2.3.5zm0-10.3c-2.2 0-4 1.8-4 4.1s1.8 4.1 4 4.1 4-1.8 4-4.1-1.8-4.1-4-4.1z"></path><circle cx="12" cy="15.6" r="1.7"></circle></svg></a><a href="https://github.com/ICESAT-2HackWeek/icesat2-cookbook" title="GitHub Repository: ICESAT-2HackWeek/icesat2-cookbook" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><a href="https://github.com/ICESAT-2HackWeek/icesat2-cookbook/blob/HEAD/notebooks/visualization.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8top:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div><button class="inline-flex size-[24px] hover:text-[#E18435] items-center justify-center" aria-label="Launch in external computing interface" title="Launch in external computing interface" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Re8top:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div><h1 class="mb-0">Interactive Visualizion with Open Altimetry &amp; Google Earth Engine</h1><header class="mt-4 not-prose"><div><span class="font-semibold text-sm inline-block"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78top:" data-state="closed">ICESat-2 team</button></span></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div class="sticky top-[60px] pb-[14px] flex justify-end w-full z-20 pointer-events-none"><div class="flex p-1 m-1 space-x-1 border rounded-full shadow pointer-events-auto border-stone-300 bg-white/80 dark:bg-stone-900/80 backdrop-blur"><div class="rounded"><button class="flex text-center rounded-full cursor-pointer text-stone-800 dark:text-white hover:opacity-100 opacity-60" aria-label="start compute environment"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="inline-block w-6 h-6 align-top"><title>Launch kernel</title><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"></path></svg></button></div></div></div><div id="skip-to-article"></div><div id="BP96yjuvte" class="relative group/block"><p>By Philipp Arndt, Chancelor Roberts <br/>Scripps Institution of Oceanography, University of California San Diego <br/>Github: <a target="_blank" rel="noreferrer" href="https://github.com/fliphilipp" class=""><span class="text-yellow-600" title="Citation Not Found"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1rem" height="1rem" class="inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg>fliphilipp</span></a>, <a target="_blank" rel="noreferrer" href="https://github.com/chancelorr" class=""><span class="text-yellow-600" title="Citation Not Found"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1rem" height="1rem" class="inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg>chancelorr</span></a> <br/>Contact: <a target="_blank" rel="noreferrer" href="mailto:ccroberts@ucsd.edu" class="">ccroberts@ucsd.edu</a></p><h2 id="learning-objectives" class="relative group"><span class="heading-text">Learning Objectives</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#learning-objectives" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li>Discover some interesting ICESat-2 data by browsing <a target="_blank" rel="noreferrer" href="https://openaltimetry.org/data/icesat2/" class="">OpenAltimetry</a></li><li>Get the data into a Jupyter Notebook, plot it and overlay the ground track on a map</li><li>Use <a target="_blank" rel="noreferrer" href="https://earthengine.google.com/" class="">Google Earth Engine</a> to find the closest-in-time Sentinel-2 image that is cloud-free along ICESat-2’s gound track</li><li>Make a plot from ICESat-2 data and contemporaneous imagery in Jupyter/matplotlib</li><li>Bonus Code: Use Google Earth Engine to extract Sentinel-2 data along the ICESat-2 ground track</li></ul></div><div id="oqpWRzqtcp" class="relative group/block"><h2 id="computing-environment" class="relative group"><span class="heading-text">Computing environment</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#computing-environment" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We’ll be using the following Python libraries in this notebook:</p></div><div id="ESqjEsXLUn" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">#%matplotlib widget 
import os
import ee
import geemap
import requests
import numpy as np
import pandas as pd
import matplotlib.pylab as plt
from datetime import datetime
from datetime import timedelta
from ipywidgets import Layout
import rasterio as rio
from rasterio import plot as rioplot
from rasterio import warp</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="hH10ubyW4UlwyNHWtSUJm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">ModuleNotFoundError</span><span>                       Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 187)">Cell</span><span style="color:rgb(0, 187, 187)"> </span><span style="color:rgb(0, 187, 0)">In[1]</span><span style="color:rgb(0, 187, 0)">, line 3</span><span>
</span><span style="color:rgb(0, 187, 0)">      1</span><span> </span><span style="color:rgb(95, 135, 135);font-style:italic">#%matplotlib widget </span><span>
</span><span style="color:rgb(0, 187, 0)">      2</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">os</span><span>
</span><span style="color:rgb(0, 187, 0)">----&gt; </span><span style="color:rgb(0, 187, 0)">3</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">ee</span><span>
</span><span style="color:rgb(0, 187, 0)">      4</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">geemap</span><span>
</span><span style="color:rgb(0, 187, 0)">      5</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">requests</span><span>

</span><span style="color:rgb(187, 0, 0)">ModuleNotFoundError</span><span>: No module named &#x27;ee&#x27;</span></code></pre></div></div></div><div id="GFnNPTBQXg" class="relative group/block"><p>The import below is a class that I wrote myself. It helps us read and store data from the OpenAltimetry API.<br/>If you are interested in how this works, you can find the code in <code>utils/oa.py</code>.</p></div><div id="GZLXnm0qLo" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import utils.oa as oa
from utils.oa import dataCollector</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="-qBhvwFoZYjFo6Umn3uq8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dGYujAutjf" class="relative group/block"><h2 id="google-earth-engine-authentication-and-initialization" class="relative group"><span class="heading-text">Google Earth Engine Authentication and Initialization</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#google-earth-engine-authentication-and-initialization" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>GEE requires you to authenticate your access, so if <code>ee.Initialize()</code> does not work you first need to run <code>ee.Authenticate()</code>. This gives you a link at which you can use your google account that is associated with GEE to get an authorization code. Copy the authorization code into the input field and hit <em>enter</em> to complete authentication.</p></div><div id="XWKcolCtL3" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">try:
    ee.Initialize()
except: 
    ee.Authenticate()
    ee.Initialize()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fov-x8ebRV7dlpGYaqqJv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="LFvxg3VoLu" class="relative group/block"><h2 id="downloading-data-from-the-openaltimetry-api" class="relative group"><span class="heading-text">Downloading data from the OpenAltimetry API</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#downloading-data-from-the-openaltimetry-api" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Let’s say we have found some data that looks weird to us, and we don’t know what’s going on.</p><img id="lRnYTMExz4" style="margin:0 auto" src="/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg" alt="image showing OpenAltimetry screenshot" data-canonical-url="https://raw.githubusercontent.com/fliphilipp/images/main/oa-data.jpg" class=""/><h3 id="a-short-explanation-of-how-i-got-the-data" class="relative group"><span class="heading-text">A short explanation of how I got the data:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#a-short-explanation-of-how-i-got-the-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>I went to <a target="_blank" rel="noreferrer" href="https://openaltimetry.org/" class="">openaltimetry.org</a> and selected <strong>BROWSE ICESAT-2 DATA</strong>. Then I selected <strong>ATL 06</strong> (Land Ice Height) on the top right, and switched the projection🌎 to <strong>Arctic</strong>. Then I selected <strong>August 22, 2021</strong> in the calendar📅 on the bottom left, and toggled the <strong>cloud</strong>☁️ button to show MODIS imagery of that date. I then zoomed in on my region of interest.</p><p>To find out what ICESat-2 has to offer here, I clicked on <strong>SELECT A REGION</strong> on the top left, and drew a rectangle around that mysterious cloud. When right-clicking on that rectangle, I could select <strong>View Elevation profile</strong>. This opened a new tab, and showed me ATL06 and ATL08 elevations.</p><p>It looks like ATL06 can’t decide where the surface is, and ATL08 tells me that there’s a forest canopy on the Greenland Ice Sheet? To get to the bottom of this, I scrolled all the way down and selected 🛈<strong>Get API URL</strong>. The website confirms that the <em>“API endpoint was copied to clipboard.”</em> Now I can use this to access the data myself.</p><p><em>Note: Instead of trying to find this region yourself, you can access the OpenAltimetry page shown above by going to <a target="_blank" rel="noreferrer" href="http://openaltimetry.org/data/icesat2/?annoId=580&amp;shareKey=d8bebfb8251a69b5b7e2e05df6fd5ca5" class="">this annotation🏷️</a>. Just left-click on the red box and select “View Elevation Profile”.</em></p></div><div id="weMVGPg0F1" class="relative group/block"><h3 id="getting-the-openaltimetry-info-into-python" class="relative group"><span class="heading-text">Getting the OpenAltimetry info into python</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#getting-the-openaltimetry-info-into-python" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>All we need to do is to paste the API URL that we copied from the webpage into a string.
We also need to specify which beam we would like to look at. The <strong>GT1R</strong> ground track looks funky, so let’s look at that one!</p></div><div id="zpmyqGFV02" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># paste the API URL from OpenAltimetry below, and specify the beam you are interested in
oa_api_url = &#x27;https://openaltimetry.earthdatacloud.nasa.gov/data/icesat2/elevation?minx=-25.4835556641541&amp;miny=76.44321462688005&amp;maxx=-21.976284749133928&amp;maxy=77.33633089376721&amp;zoom_level=5&amp;beams=1,2,3,4,5,6&amp;tracks=1236&amp;date=2024-09-06&amp;product=ATL06&amp;mapType=arctic&#x27;
gtx = &#x27;gt1r&#x27;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="sur9zrFodNYKAZalQFrwP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Dvs4OlF8Hi" class="relative group/block"><p>We can now initialize a <code>dataCollector</code> object, using the copy-pasted OpenAltimetry API URL, and the beam we would like to look at. <br/><em>(Again, I defined this class in <code>utils/oa.py</code> to do some work for us in the background.)</em></p></div><div id="jt8yELn6Md" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">is2data = dataCollector(oaurl=oa_api_url, beam=gtx, verbose=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jvjViecwyrquMDGWrbiqs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="q4nv5Nqfst" class="relative group/block"><p>Alternatively, we could use a date, track number, beam, and lat/lon bounding box as input to the <code>dataCollector</code>.</p></div><div id="Iqi3MOjPKA" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">date = &#x27;2021-08-22&#x27;
rgt = 909
beam = &#x27;gt1r&#x27;
latlims = [77.5326, 77.5722]
lonlims = [-23.9891, -23.9503]
is2data = dataCollector(date=date, latlims=latlims, lonlims=lonlims, track=rgt, beam=beam, verbose=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="oABmrlJa0kLk1gOIZyFFK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="pL7UI3Re3B" class="relative group/block"><p>Note that this also constructs the API url for us.</p></div><div id="zVrWzd92fC" class="relative group/block"><h3 id="requesting-the-data-from-the-openaltimetry-api" class="relative group"><span class="heading-text">Requesting the data from the OpenAltimetry API</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#requesting-the-data-from-the-openaltimetry-api" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Here we use the <code>requestData()</code> function of the <code>dataCollector</code> class, which is defined in <code>utils/oa.py</code>. It downloads all data products that are available on OpenAltimetry based on the inputs with which we initialized our <code>dataCollector</code>, and writes them to pandas dataframes.</p></div><div id="QFZ7lkWt4L" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">is2data.requestData(verbose=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="SlWhEsTEj3G0uRaU3jaVq" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ubJeFSE9R5" class="relative group/block"><p>The data are now stored as data frames in our <code>dataCollector</code> object. To verify this, we can run the cell below.</p></div><div id="sABnutOID3" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">vars(is2data)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="HvccIoKQjSSZPBGwQMbXt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="otBaUIEchh" class="relative group/block"><h2 id="plotting-the-icesat-2-data" class="relative group"><span class="heading-text">Plotting the ICESat-2 data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plotting-the-icesat-2-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Now let’s plot this data. Here, we are just creating an empty figure <code>fig</code> with axes <code>ax</code>.</p></div><div id="PlTRHdUVDT" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># create the figure and axis
fig, ax = plt.subplots(figsize=[9,5])

# plot the data products
atl06, = ax.plot(is2data.atl06.lat, is2data.atl06.h, c=&#x27;C0&#x27;, linestyle=&#x27;-&#x27;, label=&#x27;ATL06&#x27;)
atl08, = ax.plot(is2data.atl08.lat, is2data.atl08.h, c=&#x27;C2&#x27;, linestyle=&#x27;:&#x27;, label=&#x27;ATL08&#x27;)
if np.sum(~np.isnan(is2data.atl08.canopy))&gt;0:
    atl08canopy = ax.scatter(is2data.atl08.lat, is2data.atl08.h+is2data.atl08.canopy, s=2, c=&#x27;C2&#x27;, label=&#x27;ATL08 canopy&#x27;)

# add labels, title and legend
ax.set_xlabel(&#x27;latitude&#x27;)
ax.set_ylabel(&#x27;elevation in meters&#x27;)
ax.set_title(&#x27;Some ICESat-2 data I found on OpenAltimetry!&#x27;)
ax.legend(loc=&#x27;upper left&#x27;)

# add some text to provide info on what is plotted
info = &#x27;ICESat-2 track {track:d}-{beam:s} on {date:s}\n({lon:.4f}E, {lat:.4f}N)&#x27;.format(track=is2data.track, 
                                                                                        beam=is2data.beam.upper(), 
                                                                                        date=is2data.date, 
                                                                                        lon=np.mean(is2data.lonlims), 
                                                                                        lat=np.mean(is2data.latlims))
infotext = ax.text(0.01, -0.08, info,
                   horizontalalignment=&#x27;left&#x27;, 
                   verticalalignment=&#x27;top&#x27;, 
                   transform=ax.transAxes,
                   fontsize=7,
                   bbox=dict(edgecolor=None, facecolor=&#x27;white&#x27;, alpha=0.9, linewidth=0))

# set the axis limits
ax.set_xlim((is2data.atl03.lat.min(), is2data.atl03.lat.max()))
ax.set_ylim((741, 818));</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="KQbeVHLeSjP-NXSb0bZ6O" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="HVtcQQjfVN" class="relative group/block"><p>Let’s add the ATL03 photons to better understand what might be going on here.</p></div><div id="NrqS9laMVZ" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">atl03 = ax.scatter(is2data.atl03.lat, is2data.atl03.h, s=1, color=&#x27;black&#x27;, label=&#x27;ATL03&#x27;, zorder=-1)
ax.legend(loc=&#x27;upper left&#x27;)
fig.tight_layout()
display(fig)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="BgDehL__gdj06ux-nksYQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tnOS7um1Ml" class="relative group/block"><h3 id="saving-the-plot-to-a-file" class="relative group"><span class="heading-text">Saving the plot to a file</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#saving-the-plot-to-a-file" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="OpWUEJ2ljw" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig.savefig(&#x27;my-plot.jpg&#x27;, dpi=300)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="g6lg8kMuMelTa7u0WBxQm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="qYa2Vv2XNu" class="relative group/block"><p>To make plots easier to produce, the <code>dataCollector</code> class also has a method to plot the data that we downloaded.</p></div><div id="YSVXKpV6sC" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig = is2data.plotData();
fig</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="idgnuEMmurhTx3dlLkB7c" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="IG4dCXHGh8" class="relative group/block"><h2 id="ground-track-stats" class="relative group"><span class="heading-text">Ground Track Stats</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#ground-track-stats" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>So far we have only seen the data in elevation vs. latitude space. It’s probably good to know what the scale on the x-axis is here in units that we’re familiar with.</p></div><div id="HbGmGxyQsT" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def dist_latlon2meters(lat1, lon1, lat2, lon2):
    # returns the distance between two coordinate points - (lon1, lat1) and (lon2, lat2) along the earth&#x27;s surface in meters.
    R = 6371000
    def deg2rad(deg):
        return deg * (np.pi/180)
    dlat = deg2rad(lat2-lat1)
    dlon = deg2rad(lon2-lon1)
    a = np.sin(dlat/2) * np.sin(dlat/2) + np.cos(deg2rad(lat1)) * np.cos(deg2rad(lat2)) * np.sin(dlon/2) * np.sin(dlon/2)
    c = 2 * np.arctan2(np.sqrt(a), np.sqrt(1-a))
    return R * c

lat1, lat2 = is2data.atl08.lat[0], is2data.atl08.lat.iloc[-1]
lon1, lon2 = is2data.atl08.lon[0], is2data.atl08.lon.iloc[-1]

ground_track_length = dist_latlon2meters(lat1, lon1, lat2, lon2)
print(&#x27;The ground track is about %.1f kilometers long.&#x27; % (ground_track_length/1e3))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="_BhYNy_1BYuaWoVa4_lHf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sOSF3CC8Cn" class="relative group/block"><h2 id="google-earth-engine" class="relative group"><span class="heading-text">Google Earth Engine</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#google-earth-engine" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Google Earth Engine (GEE) has a large <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/datasets" class="">catalog</a> of geospatial raster data, which is ready for analysis in the cloud. It also comes with an online JavaScript code editor.<br/><img id="fjL7LoUK6y" style="width:400px;margin:0 auto" src="/icesat2-cookbook/_preview/7/build/697fd195613a884d70f9711b06c8e49f.png" alt="gif showing how to get to the data in OpenAltimetry" data-canonical-url="https://raw.githubusercontent.com/fliphilipp/images/main/gee_codeeditor.png" class=""/>
But since we all seem to be using python, it would be nice to have these capabilities available in our Jupyter comfort zone...</p><p>Thankfully, there is a <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/tutorials/community/intro-to-python-api" class="">python API for GEE</a>, which we have imported using <code>import ee</code> earlier. It doesn’t come with an interactive map, but the python package <a target="_blank" rel="noreferrer" href="https://geemap.org/" class="">geemap</a> has us covered!</p></div><div id="S293fkH3Nx" class="relative group/block"><h3 id="show-a-ground-track-on-a-map" class="relative group"><span class="heading-text">Show a ground track on a map</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#show-a-ground-track-on-a-map" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We can start working on our map by calling <code>geemap.Map()</code>. This just gives us a world map with a standard basemap.</p></div><div id="Vw2p68rzVU" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from ipywidgets import Layout
Map = geemap.Map(layout=Layout(width=&#x27;70%&#x27;, max_height=&#x27;450px&#x27;))
Map</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="C_Wvot-1sKB5HiGPYaaRy" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="G6HnSfKW9j" class="relative group/block"><p>Now we need to add our ICESat-2 gound track to that map. Let’s use the lon/lat coordinates of the ATL08 data product for this.<br/>We also need to specify which <strong>Coordinate Reference System (CRS)</strong> our data is in. The longitude/latitude system that we are all quite familiar with is referenced by <a target="_blank" rel="noreferrer" href="https://epsg.io/4326" class=""><code>EPSG:4326</code></a>. To add the ground track to the map we need to turn it into an <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/guides/feature_collections" class="">Earth Engine “Feature Collection”</a>.</p></div><div id="gZ83a34yfL" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ground_track_coordinates = list(zip(is2data.atl08.lon, is2data.atl08.lat))
ground_track_projection = &#x27;EPSG:4326&#x27; # &lt;-- this specifies that our data longitude/latitude in degrees [https://epsg.io/4326]
gtx_feature = ee.FeatureCollection(ee.Geometry.LineString(coords=ground_track_coordinates, 
                                      proj=ground_track_projection, 
                                      geodesic=True))
gtx_feature</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="gJSwtud5edzDbqE82CTPc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="wAiQ14xD7T" class="relative group/block"><p>Now that we have it in the right format, we can add it as a <strong>layer</strong> to the map.</p></div><div id="eBZBNXB7nj" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">Map.addLayer(gtx_feature, {&#x27;color&#x27;: &#x27;red&#x27;}, &#x27;ground track&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fLF7Iorwuv3BUu3TlB-k6" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="TXhfkEg92M" class="relative group/block"><p>According to the cell above this should be a red line. But we still can’t see it, because we first need to tell the map where to look for it.<br/>Let’s calculate the center longitude and latitude, and center the map on it.</p></div><div id="jamJeFWxNW" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">center_lon = (lon1 + lon2) / 2
center_lat = (lat1 + lat2) / 2
Map.setCenter(center_lon, center_lat, zoom=7);</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4w3xKUcbC9cr8sl7nqh3V" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="OhkvxOhG6D" class="relative group/block"><p>So we actually couldn’t see it because it was in Greenland.<br/>Unfortunately the basemap here doesn’t give us much more information. Let’s add a satellite imagery basemap.
This is a good time to look at the layer control on the top right.</p></div><div id="R0YLo6PyfX" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">Map.add_basemap(&#x27;SATELLITE&#x27;) # &lt;-- this adds a layer called &#x27;Google Satellite&#x27;
Map.setCenter(center_lon, center_lat, zoom=7);
Map.addLayer(gtx_feature,{&#x27;color&#x27;: &#x27;red&#x27;},&#x27;ground track&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qrqggPjriRU5aaOjlMcFR" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="b1JmNUKG4o" class="relative group/block"><p>...looks like this basemap still doesn’t give us any more clues about the nature of this weird ICESat-2 data. Let’s dig deeper.</p></div><div id="yXW21ZtVKD" class="relative group/block"><h3 id="query-for-sentinel-2-images" class="relative group"><span class="heading-text">Query for Sentinel-2 images</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#query-for-sentinel-2-images" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Both of these Sentinel-2 satellites take images of most places on our planet at least every week or so. Maybe these images can tell us what was happening here around the same time that ICESat-2 acquired our data?</p><p>The imagery scenes live in image collections on Google Earth Engine.<br/>You can find all collections here: <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/datasets/catalog/" class="">https://<wbr/>developers<wbr/>.google<wbr/>.com<wbr/>/earth<wbr/>-engine<wbr/>/datasets<wbr/>/catalog/</a></p></div><div id="eZjEPwUR48" class="relative group/block"><p>The above link tells us we can find some images under <code>&#x27;COPERNICUS/S2_SR_HARMONIZED&#x27;</code>.</p></div><div id="OXOEk7HvVw" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection_name1 = &#x27;COPERNICUS/S2_SR_HARMONIZED&#x27;  # Landsat 8 earth engine collection 
# https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C01_T2</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="yanrixZbY7CUJaR49nSBN" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="V6eRtTavZL" class="relative group/block"><h4 id="access-an-image-collection" class="relative group"><span class="heading-text">Access an image collection</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#access-an-image-collection" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>To access the collection, we call <code>ee.ImageCollection</code>:</p></div><div id="CxA3AfPvwc" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection = ee.ImageCollection(collection_name1)
collection</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qBePIkBcaz0gsaBjtfFjP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="wDnb70KLCh" class="relative group/block"><p>Can we find out how many images there are in total?</p></div><div id="wlJSUVWFON" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">number_of_scenes = collection.size()
print(number_of_scenes)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="zavJjClmO09u-0uqn83-s" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="T7HuQUIlO7" class="relative group/block"><p><strong>Actually, asking for the size of the collection does not do anything!</strong> 🤔</p><p>It just tells Earth Engine on the server-side that this variable refers to the size of the collection, which we may need later to do some analysis on the server. As long as this number is not needed, Earth Engine will not go through the trouble actually computing it.</p><p>To force Earth Engine to compute and get any information on the client side (our local machine / Cryocloud), we need to call <code>.getInfo()</code>. In this case that would be <code>number_of_scenes = collection.size().getInfo()</code>.</p><p><em>Because this command would ask Earth Engine to count every single Sentinel-2 file that exists, this command would take a really long time to execute. I will avoid this here and just give you the answer from when I wrote this tutorial.</em></p></div><div id="VSbXy7Km06" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># number_of_scenes = collection.size().getInfo()
number_of_scenes = 19323842
print(&#x27;There are %i number of scenes in the image collection&#x27; % number_of_scenes)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="1b3ad1IpCmSyQ9PAZ7_hO" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="J2UGzJrkli" class="relative group/block"><h4 id="filter-an-image-collection-by-location-and-time" class="relative group"><span class="heading-text">Filter an image collection by location and time</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#filter-an-image-collection-by-location-and-time" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>Who wants to look at almost 20 million pictures? I don’t. So let’s try to narrow it down.<br/>Let’s start with only images that overlap with the center of our ground track.</p></div><div id="Go9bmGXeSf" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># the point of interest (center of the track) as an Earth Engine Geometry
point_of_interest = ee.Geometry.Point(center_lon, center_lat)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jrmGTYzFTruQc5GxQO28E" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="a97jcOdeRM" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection = collection.filterBounds(point_of_interest)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="nV0H3TM1JFO1YFyRXZI6J" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="cL22bZBXRh" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(&#x27;There are {number:d} images in the spatially filtered collection.&#x27;.format(number=collection.size().getInfo()))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="eM8lHNhujv7Xz2H0NYxMX" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ZsjhXw5Lmt" class="relative group/block"><p>Much better! Now let’s only look at images that were taken soon before or after ICESat-2 passed over this spot.</p></div><div id="PLrBDVXIBK" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">days_buffer_imagery = 6</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fVnjZqAqfG0rZMn5hSZxM" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="kTM3hCHKUz" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">dateformat = &#x27;%Y-%m-%d&#x27;
datetime_requested = datetime.strptime(is2data.date, dateformat)
search_start = (datetime_requested - timedelta(days=days_buffer_imagery)).strftime(dateformat)
search_end = (datetime_requested + timedelta(days=days_buffer_imagery)).strftime(dateformat)
print(&#x27;Search for imagery from {start:s} to {end:s}.&#x27;.format(start=search_start, end=search_end))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="mVACdJwGfy5pyS5m5x4Al" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sLe8qEpaS5" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection = collection.filterDate(search_start, search_end)
print(&#x27;There are {number:d} images in the spatially filtered collection.&#x27;.format(number=collection.size().getInfo()))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="HVZR363I9q3NsLjpU7sTa" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="rjvmMeZSmA" class="relative group/block"><p>We can also sort the collection by date (<code>&#x27;system:time_start&#x27;</code>), to order the images by acquisition time.</p></div><div id="dBgGHchJgf" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection = collection.sort(&#x27;system:time_start&#x27;) </code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="-fLhNxUkd1KmdcyIpHFaw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GnLx6IktYP" class="relative group/block"><h4 id="get-image-collection-info" class="relative group"><span class="heading-text">Get image collection info</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#get-image-collection-info" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>Again, we need to use <code>.getInfo()</code> to actually see any information on our end. This is a python dictionary.</p></div><div id="CJR6KiSKOn" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">info = collection.getInfo()
type(info)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Vdp7tePPzv1G_TiMSvI_Z" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="QiTTsXQzgp" class="relative group/block"><p>Let’s see what’s inside!</p></div><div id="dWOCxn0IBm" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">info.keys()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="GHt_kHav9OWEcBVAYO6L7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="mXSequ6Q5B" class="relative group/block"><p><code>&#x27;features&#x27;</code> sounds like it could hold information about the images we are trying to find...</p></div><div id="fDOzPBXFLo" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">len(info[&#x27;features&#x27;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="oobZXqPYkhofNOmDcmjZH" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ozBCcsL3zN" class="relative group/block"><p>A list of 34 things! Those are probably the 34 images in the collection. Let’s pick the first one and dig deeper!</p></div><div id="BG8jjz96AM" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">feature_number = 0
info[&#x27;features&#x27;][0].keys()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4OWrf8WN06jTENF8xGpck" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GuJkgydD9M" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">info[&#x27;features&#x27;][feature_number][&#x27;id&#x27;]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="cpa8x596jb-mz5kiLdRtz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="UKpBLDKHdk" class="relative group/block"><p>Looks like we found a reference to a Sentinel-2 image! Let’s look at the <code>&#x27;bands&#x27;</code>.</p></div><div id="hoeVFa5Di3" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">for band in info[&#x27;features&#x27;][feature_number][&#x27;bands&#x27;]:
    print(band[&#x27;id&#x27;], end=&#x27;, &#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="2fysED5AfXyGdvQOXR1zz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="TUHhRQmfXp" class="relative group/block"><p><code>&#x27;properties&#x27;</code> could be useful too!</p></div><div id="DjHRmlmAqq" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">info[&#x27;features&#x27;][0][&#x27;properties&#x27;].keys()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="X9MAQpUaKZMtDXeKS65uU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="prw7iOA11u" class="relative group/block"><p>That’s a lot going on right there! But <code>&#x27;GRANULE_ID&#x27;</code> is probably useful. Let’s go through all our features and print the product id.</p></div><div id="BsyRXfaDk0" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">for feature in info[&#x27;features&#x27;]:
    print(feature[&#x27;properties&#x27;][&#x27;GRANULE_ID&#x27;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="lfWvBb2jKQw5hmup9n8H9" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="xF5CDv0maW" class="relative group/block"><h3 id="add-a-sentinel-2-image-to-the-map" class="relative group"><span class="heading-text">Add a Sentinel-2 image to the map</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#add-a-sentinel-2-image-to-the-map" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The visible bands in Sentinel-2 are <code>&#x27;B2&#x27;</code>:blue, <code>&#x27;B3&#x27;</code>:green, <code>&#x27;B4&#x27;</code>:red.<br/>So to show a “true color” RGB composite image on the map, we need to select these bands in the R-G-B order:</p></div><div id="PXEzC4i6aU" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">myImage = collection.first()
myImage_RGB = myImage.select(&#x27;B4&#x27;, &#x27;B3&#x27;, &#x27;B2&#x27;)
vis_params = {&#x27;min&#x27;: 0.0, &#x27;max&#x27;: 10000, &#x27;opacity&#x27;: 1.0, &#x27;gamma&#x27;: 1.5}
Map.addLayer(myImage_RGB, vis_params, name=&#x27;my image&#x27;)
Map.addLayer(gtx_feature,{&#x27;color&#x27;: &#x27;red&#x27;},&#x27;ground track&#x27;)
Map</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ktrLL4MInUgxym4BBDjVs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="vhaY6YCKGX" class="relative group/block"><p>This seems to have worked. But there’s clouds everywhere.</p></div><div id="CjG05s317a" class="relative group/block"><h3 id="calculate-the-along-track-cloud-probability" class="relative group"><span class="heading-text">Calculate the along-track cloud probability</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#calculate-the-along-track-cloud-probability" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We need a better approach to get anywhere here. To do this, we use not only the <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_SR_HARMONIZED" class="">Sentinel-2 Surface Reflectance image collection</a>, but also merge it with the <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_CLOUD_PROBABILITY" class="">Sentinel-2 cloud probability collection</a>, which can be accessed under <code>COPERNICUS/S2_CLOUD_PROBABILITY</code>.</p><p>Let’s specify a function that adds the cloud probability band to each Sentinel-2 image and calcultes the mean cloud probability in the neighborhood of the ICESat-2 ground track, then map this function over our location/date filtered collection.</p></div><div id="MCSak2pJUp" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def get_sentinel2_cloud_collection(is2data, days_buffer=6, gt_buffer=100):
    
    # create the area of interest for cloud likelihood assessment
    ground_track_coordinates = list(zip(is2data.atl08.lon, is2data.atl08.lat))
    ground_track_projection = &#x27;EPSG:4326&#x27; # our data is lon/lat in degrees [https://epsg.io/4326]
    gtx_feature = ee.Geometry.LineString(coords=ground_track_coordinates,
                                     proj=ground_track_projection,
                                     geodesic=True)
    area_of_interest = gtx_feature.buffer(gt_buffer)
    
    datetime_requested = datetime.strptime(is2data.date, &#x27;%Y-%m-%d&#x27;)
    start_date = (datetime_requested - timedelta(days=days_buffer)).strftime(&#x27;%Y-%m-%dT%H:%M:%S&#x27;)
    end_date = (datetime_requested + timedelta(days=days_buffer)).strftime(&#x27;%Y-%m-%dT%H:%M:%S&#x27;)
    print(&#x27;Search for imagery from {start:s} to {end:s}.&#x27;.format(start=start_date, end=end_date))
    
    # Import and filter S2 SR HARMONIZED
    s2_sr_collection = (ee.ImageCollection(&#x27;COPERNICUS/S2_SR_HARMONIZED&#x27;)
        .filterBounds(area_of_interest)
        .filterDate(start_date, end_date))

    # Import and filter s2cloudless.
    s2_cloudless_collection = (ee.ImageCollection(&#x27;COPERNICUS/S2_CLOUD_PROBABILITY&#x27;)
        .filterBounds(area_of_interest)
        .filterDate(start_date, end_date))

    # Join the filtered s2cloudless collection to the SR collection by the &#x27;system:index&#x27; property.
    cloud_collection = ee.ImageCollection(ee.Join.saveFirst(&#x27;s2cloudless&#x27;).apply(**{
        &#x27;primary&#x27;: s2_sr_collection, &#x27;secondary&#x27;: s2_cloudless_collection,
        &#x27;condition&#x27;: ee.Filter.equals(**{&#x27;leftField&#x27;: &#x27;system:index&#x27;,&#x27;rightField&#x27;: &#x27;system:index&#x27;})}))

    cloud_collection = cloud_collection.map(lambda img: img.addBands(ee.Image(img.get(&#x27;s2cloudless&#x27;)).select(&#x27;probability&#x27;)))
    
    def set_is2_cloudiness(img, aoi=area_of_interest):
        cloudprob = img.select([&#x27;probability&#x27;]).reduceRegion(reducer=ee.Reducer.mean(), 
                                                             geometry=aoi, 
                                                             bestEffort=True, 
                                                             maxPixels=1e6)
        return img.set(&#x27;ground_track_cloud_prob&#x27;, cloudprob.get(&#x27;probability&#x27;))
    
    return cloud_collection.map(set_is2_cloudiness)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="MqUzAQBFoU0ol0hlgvDza" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="bYvhL5ZEWV" class="relative group/block"><p>Get this collection for our ICESat-2 data, and print all the granule IDs and associated cloudiness over the ground track.</p></div><div id="X49c6KlmVJ" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">collection = get_sentinel2_cloud_collection(is2data)
info = collection.getInfo()
for feature in info[&#x27;features&#x27;]:
    print(&#x27;%s --&gt; along-track cloud probability: %5.1f %%&#x27; % (feature[&#x27;properties&#x27;][&#x27;GRANULE_ID&#x27;],
                                                              feature[&#x27;properties&#x27;][&#x27;ground_track_cloud_prob&#x27;]))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="SCmr4J1gnMxlGbvbSY5A_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="shvHGHU3FU" class="relative group/block"><h3 id="filter-cloudy-images" class="relative group"><span class="heading-text">Filter cloudy images</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#filter-cloudy-images" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We specify a certain cloud probability threshold, and then only keep the images that fall below it. Here we are choosing a quite aggressive value of maximum 5% cloud probability...</p></div><div id="u3Nx5GpoTM" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># filter by maximum allowable cloud probability (in percent)
MAX_CLOUD_PROB_ALONG_TRACK = 5
cloudfree_collection = collection.filter(ee.Filter.lt(&#x27;ground_track_cloud_prob&#x27;, MAX_CLOUD_PROB_ALONG_TRACK))
print(&#x27;There are %i cloud-free scenes.&#x27; % cloudfree_collection.size().getInfo())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="tPR_59D1dPO9fzM8kD781" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="hvcppa2NRc" class="relative group/block"><h3 id="sort-the-collection-by-time-difference-from-the-icesat-2-overpass" class="relative group"><span class="heading-text">Sort the collection by time difference from the ICESat-2 overpass</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#sort-the-collection-by-time-difference-from-the-icesat-2-overpass" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Using the image property <code>&#x27;system:time_start&#x27;</code> we can calculate the time difference from the ICESat-2 overpass and set it as a property. This allows us to sort the collection by it and to make sure that the first image in the collection is the closest-in-time to ICESat-2 image that is also cloud-free.</p></div><div id="nSqGcOzsHe" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># get the time difference between ICESat-2 overpass and Sentinel-2 acquisitions, set as image property
is2time = is2data.date + &#x27;T12:00:00&#x27;
def set_time_difference(img, is2time=is2time):
    timediff = ee.Date(is2time).difference(img.get(&#x27;system:time_start&#x27;), &#x27;second&#x27;).abs()
    return img.set(&#x27;timediff&#x27;, timediff)
cloudfree_collection = cloudfree_collection.map(set_time_difference).sort(&#x27;timediff&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="EYqBpIqrcBJBiuPWVt8t5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="TIjw2iSboQ" class="relative group/block"><p>Print some stats for the final collection to make sure everything looks alright.</p></div><div id="lIa4g9GGA8" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">info = cloudfree_collection.getInfo()
for feature in info[&#x27;features&#x27;]:
    s2datetime = datetime.fromtimestamp(feature[&#x27;properties&#x27;][&#x27;system:time_start&#x27;]/1e3)
    is2datetime = datetime.strptime(is2time, &#x27;%Y-%m-%dT%H:%M:%S&#x27;)
    timediff = s2datetime - is2datetime
    timediff -= timedelta(microseconds=timediff.microseconds)
    diffsign = &#x27;before&#x27; if timediff &lt; timedelta(0) else &#x27;after&#x27;
    print(&#x27;%s --&gt; along-track cloud probability: %5.1f %%, %s %7s ICESat-2&#x27; % (feature[&#x27;properties&#x27;][&#x27;GRANULE_ID&#x27;],
              feature[&#x27;properties&#x27;][&#x27;ground_track_cloud_prob&#x27;],np.abs(timediff), diffsign))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="CmFVk-d7Ld_XOChS4-XEU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GgtHFCOuUf" class="relative group/block"><h3 id="show-the-final-image-and-ground-track-on-the-map" class="relative group"><span class="heading-text">Show the final image and ground track on the map</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#show-the-final-image-and-ground-track-on-the-map" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="JHC2HQ7BGT" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">first_image_rgb = cloudfree_collection.first().select(&#x27;B4&#x27;, &#x27;B3&#x27;, &#x27;B2&#x27;)
Map = geemap.Map(layout=Layout(width=&#x27;70%&#x27;, max_height=&#x27;450px&#x27;))
Map.add_basemap(&#x27;SATELLITE&#x27;)
Map.addLayer(first_image_rgb, vis_params, name=&#x27;my image&#x27;)
Map.addLayer(gtx_feature,{&#x27;color&#x27;: &#x27;red&#x27;},&#x27;ground track&#x27;)
Map.centerObject(gtx_feature, zoom=12)
Map</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="GJ0E-oRSH8-zKDXyzQX_k" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="PDOXipbJSR" class="relative group/block"><h3 id="download-images-from-earth-engine" class="relative group"><span class="heading-text">Download images from Earth Engine</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#download-images-from-earth-engine" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We can use <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/apidocs/ee-image-getdownloadurl" class=""><code>.getDownloadUrl()</code></a> on an Earth Engine image.</p><p>It asks for a scale, which is just the pixel size in meters (10 m for Sentinel-2 visible bands). It also asks for the region we would like to export; here we use a <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/apidocs/ee-geometry-buffer" class=""><code>.buffer</code></a> around the center.</p><p><em>(Note: This function can only be effectively used for small download jobs because there is a request size limit. Here, we only download a small region around the ground track, and convert the image to an 8-bit RGB composite to keep file size low. For larger jobs you should use <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/apidocs/export-image-todrive" class=""><code>Export.image.toDrive</code></a>)</em></p></div><div id="UztZOgFbKy" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># create a region around the ground track over which to download data
point_of_interest = ee.Geometry.Point(center_lon, center_lat)
buffer_around_center_meters = ground_track_length*0.52
region_of_interest = point_of_interest.buffer(buffer_around_center_meters)

# make the image 8-bit RGB
s2rgb = first_image_rgb.unitScale(ee.Number(0), ee.Number(10000)).clamp(0.0, 1.0).multiply(255.0).uint8()

# get the download URL
downloadURL = s2rgb.getDownloadUrl({&#x27;name&#x27;: &#x27;mySatelliteImage&#x27;,
                                          &#x27;crs&#x27;: s2rgb.projection().crs(),
                                          &#x27;scale&#x27;: 10,
                                          &#x27;region&#x27;: region_of_interest,
                                          &#x27;filePerBand&#x27;: False,
                                          &#x27;format&#x27;: &#x27;GEO_TIFF&#x27;})
downloadURL</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fdTEA2k5_KJOrdxdFWbhG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dkoS1FdOLp" class="relative group/block"><p>We can save the content of the download URL with the <a target="_blank" rel="noreferrer" href="https://docs.python-requests.org/en/latest/" class=""><code>requests</code></a> library.</p></div><div id="kbvXY4kjkP" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">response = requests.get(downloadURL)
filename = &#x27;my-satellite-image.tif&#x27;
with open(filename, &#x27;wb&#x27;) as f:
    f.write(response.content)
print(&#x27;Downloaded %s&#x27; % filename)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="RQhNmO6IAh2u75yZ97HbF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="T3tyDiW8lj" class="relative group/block"><h3 id="open-a-geotiff-in-rasterio" class="relative group"><span class="heading-text">Open a GeoTIFF in rasterio</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#open-a-geotiff-in-rasterio" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now that we have saved the file, we can open it locally with the <a target="_blank" rel="noreferrer" href="https://rasterio.readthedocs.io/en/latest/intro.html" class=""><code>rasterio</code></a> library.</p></div><div id="wb3R9rgMXN" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">myImage = rio.open(filename)
myImage</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="mKgBZ1xLEvltYmJGS0RT4" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tATupfyLfr" class="relative group/block"><h3 id="plot-a-geotiff-in-matplotlib" class="relative group"><span class="heading-text">Plot a GeoTIFF in Matplotlib</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plot-a-geotiff-in-matplotlib" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now we can easily plot the image in a matplotlib figure, just using the <a target="_blank" rel="noreferrer" href="https://rasterio.readthedocs.io/en/latest/api/rasterio.plot.html" class=""><code>rasterio.plot()</code></a> module.</p></div><div id="CZgzUsFuTf" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig, ax = plt.subplots(figsize=[4,4])
rioplot.show(myImage, ax=ax);</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="zVT0X5gtYTw13Pm45tbL2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="PcGKaGoMes" class="relative group/block"><h3 id="transform-the-ground-track-into-the-image-crs" class="relative group"><span class="heading-text">transform the ground track into the image CRS</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#transform-the-ground-track-into-the-image-crs" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Because our plot is now in the Antarctic Polar Stereographic Coordrinate Reference System, we need to project the coordinates of the ground track from lon/lat values. The <a target="_blank" rel="noreferrer" href="https://rasterio.readthedocs.io/en/latest/api/rasterio.warp.html" class=""><code>rasterio.warp.transform</code></a> function has us covered. From then on, it’s just plotting in Matplotlib.</p></div><div id="fzL2WqJ7mQ" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">gtx_x, gtx_y = warp.transform(src_crs=&#x27;epsg:4326&#x27;, dst_crs=myImage.crs, xs=is2data.atl08.lon, ys=is2data.atl08.lat)
ax.plot(gtx_x, gtx_y, color=&#x27;red&#x27;, linestyle=&#x27;-&#x27;)
ax.axis(&#x27;off&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="70mbpI6xZgQyTlaYOitvH" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="DihgNo6KaZ" class="relative group/block"><h2 id="putting-it-all-together" class="relative group"><span class="heading-text">Putting it all together</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#putting-it-all-together" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The code above is found more concisely in one more method:</p><ul><li><code>dataCollector.visualize_sentinel2()</code></li></ul><p>This one has some default parameters, which you can change when running it:</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-text" style="white-space:pre">- max_cloud_prob = 20
- days_buffer = 10
- gamma_value = 1.8
- title = &#x27;ICESat-2 data&#x27;
- imagery_filename = &#x27;my-satellite-image.tif&#x27;
- plot_filename = &#x27;my-plot.jpg&#x27;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>We can now do everything we did in this tutorial in just three lines!</p></div><div id="NvXgj8dQlv" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">url = &#x27;http://openaltimetry.org/data/api/icesat2/atl03?date=2021-08-22&amp;minx=-23.989069717620517&amp;miny=77.53261687779506&amp;maxx=-23.950348700496775&amp;maxy=77.57222464044443&amp;trackId=909&amp;beamName=gt1r&amp;beamName=gt1l&amp;outputFormat=json&#x27;
is2data = dataCollector(oaurl=url,beam=&#x27;gt1r&#x27;)
fig = is2data.visualize_sentinel2(max_cloud_prob=5, title=&#x27;some ICESat-2 data with a Sentinel-2 image&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="7h8GMvQLw2hYwpu39Fjt7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dYm0qCELOr" class="relative group/block"><p><strong>And now we can also easily run this on some totally different data!</strong></p></div><div id="x9RlfvVY8j" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">url = &#x27;http://openaltimetry.org/data/api/icesat2/atl12?date=2020-12-15&amp;minx=-77.858681&amp;miny=25.728091&amp;maxx=-77.831461&amp;maxy=25.832559&amp;trackId=1254&amp;beamName=gt1r&amp;beamName=gt1l&amp;outputFormat=json&#x27;
mydata = dataCollector(oaurl=url, beam=&#x27;gt1r&#x27;)
fig = mydata.visualize_sentinel2(max_cloud_prob=20,
                                 title=&#x27;Nearshore Bathymetry ICESat-2 Data&#x27;, 
                                 imagery_filename=&#x27;my-other-satellite-image.tif&#x27;,
                                 plot_filename=&#x27;nearshore-bathymetry.jpg&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="hJRozcLXZOyrK4oIazEEj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ybCqVavFXy" class="relative group/block"><h2 id="exercise" class="relative group"><span class="heading-text">Exercise</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#exercise" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p><strong>Find some data from <a target="_blank" rel="noreferrer" href="https://openaltimetry.org/data/icesat2/" class="">OpenAltimetry</a>, and plot it with a cloud-free satellite image.</strong></p><ul><li>Look for <strong>small-scale features</strong> - say a few hundred meters to 20 kilometers along-track. (<em>Hint: OpenAltimetry has a scale bar.</em>)</li><li>Bonus points for features where concurrent imagery and the ATL03 photon cloud may give us some information that we would not get from higher-level products alone!</li><li><em>Note:</em> There is no Sentinel-2 coverage at higher latitudes than ~84°, and there will be no concurrent imagery during polar night.</li></ul><p>If you don’t know where to start with OpenAltimetry, you can look <a target="_blank" rel="noreferrer" href="http://openaltimetry.org/data/icesat2/?annoId=579&amp;shareKey=2f894202007966614f6a751fe892c436" class="">here</a>.</p></div><div id="AfGWg9fRSC" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">##### YOUR CODE GOES HERE - uncomment and edit it! 
# url = &#x27;http://???.org/??&#x27;
# gtx = &#x27;gt??&#x27;
# is2data = dataCollector(oaurl=url, beam=gtx)
# fig = is2data.visualize_sentinel2(title=&#x27;&lt;your figure title goes here&gt;&#x27;, 
#                                   imagery_filename=&#x27;your-satellite-image.tif&#x27;,
#                                   plot_filename=&#x27;your-plot.jpg&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="OALAID9i0Q0LwJ8nZXtIW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="gdD82PM2LE" class="relative group/block"><h2 id="summary" class="relative group"><span class="heading-text">Summary</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#summary" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>🎉 Congratulations! You’ve completed this tutorial and have seen how we can put ICESat-2 photon-level data into context using Google Earth Engine and the OpenAltimetry API.</p><p>You can explore a few more use cases for this code (and possible solutions for Exercise 2) in <a target="_blank" rel="noreferrer" href="./use_examples.ipynb" class="">this notebook</a>.</p></div><div id="EwXWciijHd" class="relative group/block"><h2 id="references" class="relative group"><span class="heading-text">References</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#references" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>To further explore the topics of this tutorial see the following detailed documentation:</p><ul><li><a target="_blank" rel="noreferrer" href="https://openaltimetry.org/data/swagger-ui/" class="">The OpenAltimetry API</a></li><li><a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/guides" class="">Google Earth Engine JavaScript and Python Guides</a></li><li><a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/tutorials/community/sentinel-2-s2cloudless" class="">Tutorial on Sentinel-2 cloud masking with s2cloudless</a></li><li><a target="_blank" rel="noreferrer" href="https://geemap.org/" class="">The geemap package</a> and <a target="_blank" rel="noreferrer" href="https://geemap.org/tutorials/" class="">tutorials</a></li></ul></div><div id="VrQLpcQE4Z" class="relative group/block"><h2 id="bonus-material-code-for-extracting-along-track-surface-reflectance-values" class="relative group"><span class="heading-text">Bonus Material: Code for Extracting Along-Track Surface Reflectance Values</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#bonus-material-code-for-extracting-along-track-surface-reflectance-values" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Based on javascript code in <a target="_blank" rel="noreferrer" href="https://developers.google.com/earth-engine/tutorials/community/extract-raster-values-for-points" class="">this example</a>.</p></div><div id="Xou7u6pjXS" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># a function for buffering ICESat-2 along-track depth measurement locations by a footprint radius
def bufferPoints(radius, bounds=False):
    def buffer(pt):
        pt = ee.Feature(pt)
        return pt.buffer(radius).bounds() if bounds else pt.buffer(radius)
    return buffer

# a function for extracting Sentinel-2 band data for ICESat-2 along-track depth measurement locations
def zonalStats(ic, fc, reducer=ee.Reducer.mean(), scale=None, crs=None, bands=None, bandsRename=None,
               imgProps=None, imgPropsRename=None, datetimeName=&#x27;datetime&#x27;, datetimeFormat=&#x27;YYYY-MM-dd HH:mm:ss&#x27;):

    # Set default parameters based on an image representative.
    imgRep = ic.first()
    nonSystemImgProps = ee.Feature(None).copyProperties(imgRep).propertyNames()
    if not bands:
        bands = imgRep.bandNames()
    if not bandsRename:
        bandsRename = bands
    if not imgProps:
        imgProps = nonSystemImgProps
    if not imgPropsRename:
        imgPropsRename = imgProps

    # Map the reduceRegions function over the image collection.
    results = ic.map(lambda img: 
        img.select(bands, bandsRename)
        .set(datetimeName, img.date().format(datetimeFormat))
        .set(&#x27;timestamp&#x27;, img.get(&#x27;system:time_start&#x27;))
        .reduceRegions(collection=fc.filterBounds(img.geometry()),reducer=reducer,scale=scale,crs=crs)
        .map(lambda f: f.set(img.toDictionary(imgProps).rename(imgProps,imgPropsRename)))
    ).flatten().filter(ee.Filter.notNull(bandsRename))

    return results</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Vi6GAR5gBitF7QIHCw3sw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="viGvee6Lt5" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ground_track_buffer = 7.5 # radius in meters, for a 15-m diameter footprint
ground_track_coordinates = list(zip(is2data.gt.lon, is2data.gt.lat))
gtx_feature = ee.Geometry.LineString(coords=ground_track_coordinates, proj=&#x27;EPSG:4326&#x27;, geodesic=True)
aoi = gtx_feature.buffer(ground_track_buffer)

# clip to the ground track for along-track querying
img_gt = cloudfree_collection.first().clip(aoi)

# get the footprint-buffered query points from the lake object&#x27;s depth_data dataframe
pts =  ee.FeatureCollection([
    ee.Feature(ee.Geometry.Point([r.lon, r.lat]), {&#x27;plot_id&#x27;: i}) for i,r in is2data.gt.iterrows()
])
ptsS2 = pts.map(bufferPoints(ground_track_buffer))

# query the Sentinel-2 bands at the ground track locations where lake depths are posted
thiscoll = ee.ImageCollection([img_gt])
bandNames = [&#x27;B1&#x27;, &#x27;B2&#x27;, &#x27;B3&#x27;, &#x27;B4&#x27;, &#x27;B5&#x27;, &#x27;B6&#x27;, &#x27;B7&#x27;, &#x27;B8&#x27;, &#x27;B8A&#x27;, &#x27;B9&#x27;, &#x27;B11&#x27;, &#x27;B12&#x27;, &#x27;probability&#x27;]
bandIdxs = list(range(len(bandNames)-1)) + [23]
ptsData = zonalStats(thiscoll, ptsS2, bands=bandIdxs, bandsRename=bandNames, imgProps=[&#x27;PRODUCT_ID&#x27;], scale=5)

# get the data to the client side and merge into the lake depth data frame
features_select = [&#x27;plot_id&#x27;] + bandNames
results = ptsData.select(features_select, retainGeometry=False).getInfo()[&#x27;features&#x27;]
data = [x[&quot;properties&quot;] for x in results]
dfS2 = pd.DataFrame(data).set_index(&#x27;plot_id&#x27;)
df_bands = is2data.gt.join(dfS2, how=&#x27;left&#x27;)

# calculate the Normalized Difference Water Index (NDWI)
df_bands[&#x27;ndwi&#x27;] = (df_bands.B2-df_bands.B4) / (df_bands.B2+df_bands.B4)

df_bands</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Y9a5rsG0UT1Ja-MBvT6uP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tlh7uWjR2E" class="relative group/block"><div class="flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig, axs = plt.subplots(figsize=[9,5], nrows=3, sharex=True)
ax = axs[0]
ax.scatter(is2data.atl03.lat, is2data.atl03.h, s=1, c=&#x27;k&#x27;, label=&#x27;ATL03&#x27;)
ax.set_ylim((741, 818))
ax.legend()
ax = axs[1]
ax.plot(df_bands.lat,df_bands.ndwi, c=&#x27;b&#x27;, label=&#x27;NDWI&#x27;)
ax.set_ylim((0, 1))
ax.legend()
ax = axs[2]
scale = 1e-4
ax.plot(df_bands.lat,df_bands.B4*scale, c=&#x27;r&#x27;, label=&#x27;B4&#x27;)
ax.plot(df_bands.lat,df_bands.B3*scale, c=&#x27;g&#x27;, label=&#x27;B3&#x27;)
ax.plot(df_bands.lat,df_bands.B2*scale, c=&#x27;b&#x27;, label=&#x27;B2&#x27;)
ax.set_ylim((0, 1))
ax.legend()
ax.set_xlim((is2data.gt.lat.min(), is2data.gt.lat.max()))
ax.set_xlabel(&#x27;latitude&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="AgGatTZLHcoCIVew9hLFb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/icesat2-cookbook/_preview/7/notebooks/machine-learning"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">Foundations</div>Machine Learning</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/icesat2-cookbook/_preview/7/notebooks/land-ice"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">Example Workflows</div>Land Ice Applications</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-JSE36H2O.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-C7FW3E47.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-ND43KHSX.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/root-IB5726YR.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/_shared/chunk-NBON2RSI.js"/><link rel="modulepreload" href="/icesat2-cookbook/_preview/7/build/routes/$-LXLHKVOR.js"/><script>window.__remixContext = {"url":"/notebooks/visualization","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.0","options":{"favicon":"/icesat2-cookbook/_preview/7/build/config-item-9b3afca6-b183002c021de9b234b32f0ad2e0757e.ico","logo":"/icesat2-cookbook/_preview/7/build/config-item-24692dda-5ee59714381f8864fbb912f4a110f38f.svg","logo_dark":"/icesat2-cookbook/_preview/7/build/config-item-84d6d338-d059cc5760005243331965be4dafd0eb.svg","logo_url":"https://projectpythia.org","folders":true},"parts":{},"nav":[{"title":"Home","url":"https://projectpythia.org"},{"title":"Foundations","url":"https://foundations.projectpythia.org"},{"title":"Cookbooks","url":"https://cookbooks.projectpythia.org/"},{"title":"Resources","url":"https://projectpythia.org/resource-gallery/"},{"title":"Community","url":"https://projectpythia.org/#join-us"}],"actions":[{"title":"Project Pythia","url":"https://projectpythia.org","internal":false,"static":false}],"projects":[{"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"title":"ICESat-2 Tutorials","authors":[{"nameParsed":{"literal":"ICESat-2 team","given":"ICESat-2","family":"team"},"name":"ICESat-2 team","id":"contributors-myst-generated-uid-0"}],"contributors":[{"id":"brian-rose","nameParsed":{"literal":"Brian E. J. Rose","given":"Brian E. J.","family":"Rose"},"name":"Brian E. J. Rose","orcid":"0000-0002-9961-3821","email":"brose@albany.edu","affiliations":["UAlbany"],"url":"https://brian-rose.github.io","github":"brian-rose","bluesky":"@brianejrose.bsky.social","linkedin":"https://www.linkedin.com/in/brian-rose-37bb55106/"},{"id":"clyne","nameParsed":{"literal":"John Clyne","given":"John","family":"Clyne"},"name":"John Clyne","orcid":"0000-0003-2788-9017","affiliations":["CISL"],"github":"clyne"},{"id":"jukent","nameParsed":{"literal":"Julia Kent","given":"Julia","family":"Kent"},"name":"Julia Kent","orcid":"0000-0002-5611-8986","affiliations":["CISL"],"github":"jukent"},{"id":"ktyle","nameParsed":{"literal":"Kevin Tyle","given":"Kevin","family":"Tyle"},"name":"Kevin Tyle","orcid":"0000-0001-5249-9665","affiliations":["UAlbany"],"github":"ktyle"},{"id":"andersy005","nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","orcid":"0000-0001-6583-571X","affiliations":["CarbonPlan"],"github":"andersy005"},{"id":"dcamron","nameParsed":{"literal":"Drew Camron","given":"Drew","family":"Camron"},"name":"Drew Camron","orcid":"0000-0001-7246-6502","affiliations":["Unidata"],"github":"dcamron"},{"id":"dopplershift","nameParsed":{"literal":"Ryan May","given":"Ryan","family":"May"},"name":"Ryan May","orcid":"0000-0003-2907-038X","affiliations":["Unidata"],"github":"dopplershift"},{"id":"mgrover1","nameParsed":{"literal":"Maxwell Grover","given":"Maxwell","family":"Grover"},"name":"Maxwell Grover","orcid":"0000-0002-0370-8974","affiliations":["Argonne"],"github":"mgrover1"},{"id":"r-ford","nameParsed":{"literal":"Robert R. Ford","given":"Robert R.","family":"Ford"},"name":"Robert R. Ford","orcid":"0000-0001-5483-4965","affiliations":["UAlbany"],"github":"r-ford"},{"id":"kmpaul","nameParsed":{"literal":"Kevin Paul","given":"Kevin","family":"Paul"},"name":"Kevin Paul","orcid":"0000-0001-8155-8038","affiliations":["NVIDIA"],"github":"kmpaul"},{"id":"jnmorley","nameParsed":{"literal":"James Morley","given":"James","family":"Morley"},"name":"James Morley","orcid":"0009-0005-5193-7981","github":"jnmorley"},{"id":"erogluorhan","nameParsed":{"literal":"Orhan Eroglu","given":"Orhan","family":"Eroglu"},"name":"Orhan Eroglu","orcid":"0000-0003-3099-8775","affiliations":["CISL"],"github":"erogluorhan"},{"id":"lkailynncar","nameParsed":{"literal":"Lily Kailyn","given":"Lily","family":"Kailyn"},"name":"Lily Kailyn","orcid":"0009-0002-0125-5091","affiliations":["CISL"],"github":"lkailynncar"},{"id":"anissa111","nameParsed":{"literal":"Anissa Zacharias","given":"Anissa","family":"Zacharias"},"name":"Anissa Zacharias","orcid":"0000-0002-2666-8493","affiliations":["CISL"],"github":"anissa111"},{"id":"kafitzgerald","nameParsed":{"literal":"Katelyn FitzGerald","given":"Katelyn","family":"FitzGerald"},"name":"Katelyn FitzGerald","orcid":"0000-0003-4184-1917","affiliations":["CISL"],"github":"kafitzgerald"}],"github":"https://github.com/ICESAT-2HackWeek/icesat2-cookbook","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"copyright":"2025","references":{"foundations":{"url":"https://foundations.projectpythia.org"},"xarray":{"url":"https://docs.xarray.dev/en/stable"},"matplotlib":{"url":"https://matplotlib.org/stable"}},"thebe":{"binder":{"url":"https://mybinder.org/","provider":"github","repo":"projectpythia/cookbook-template","ref":"HEAD"}},"toc":[{"file":"README.md"},{"children":[{"file":"notebooks/how-to-cite.md"}],"title":"Preamble"},{"children":[{"file":"notebooks/mission-overview.ipynb"},{"file":"notebooks/data-access.ipynb"},{"file":"notebooks/filtering.ipynb"},{"file":"notebooks/geospatial-transforms.ipynb"},{"file":"notebooks/data-integration.ipynb"},{"file":"notebooks/cloud-computing.ipynb"},{"file":"notebooks/machine-learning.ipynb"},{"file":"notebooks/visualization.ipynb"}],"title":"Foundations"},{"children":[{"file":"notebooks/land-ice.ipynb"},{"file":"notebooks/sea-ice.ipynb"},{"file":"notebooks/inland-hydrology.ipynb"},{"file":"notebooks/bathymetry.ipynb"},{"file":"notebooks/snowdepth.ipynb"}],"title":"Example Workflows"}],"thumbnail":"/icesat2-cookbook/_preview/7/build/7f613ecccd986df1d247a99280f744c5.jpeg","exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Preamble"},{"slug":"notebooks.how-to-cite","title":"How to Cite This Cookbook","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/72a08caa5cbe5f9cce5999dbd1a81dfd.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Foundations"},{"slug":"notebooks.mission-overview","title":"ICESat-2 Mission Overview","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/6658703fc36e20fd253169cb1ed19215.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.filtering","title":"Cloud effects on ICESat-2 data,  and Data Filtering","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/ATL06_segment_model-c5b1aad2cc8269892f6f9bddba8df3ad.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.geospatial-transforms","title":"Geospatial Transforms","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.data-integration","title":"Data Integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.cloud-computing","title":"Cloud Computing","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.machine-learning","title":"Machine Learning","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.visualization","title":"Interactive Visualizion with Open Altimetry \u0026 Google Earth Engine","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Example Workflows"},{"slug":"notebooks.land-ice","title":"Land Ice Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.sea-ice","title":"Sea Ice Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-hydrology","title":"Inland Hydrology Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.bathymetry","title":"Bathymetry Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snowdepth","title":"Snowdepth Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/icesat2-cookbook/_preview/7"},"routes/$":{"config":{"version":2,"myst":"1.6.0","options":{"favicon":"/icesat2-cookbook/_preview/7/build/config-item-9b3afca6-b183002c021de9b234b32f0ad2e0757e.ico","logo":"/icesat2-cookbook/_preview/7/build/config-item-24692dda-5ee59714381f8864fbb912f4a110f38f.svg","logo_dark":"/icesat2-cookbook/_preview/7/build/config-item-84d6d338-d059cc5760005243331965be4dafd0eb.svg","logo_url":"https://projectpythia.org","folders":true},"parts":{},"nav":[{"title":"Home","url":"https://projectpythia.org"},{"title":"Foundations","url":"https://foundations.projectpythia.org"},{"title":"Cookbooks","url":"https://cookbooks.projectpythia.org/"},{"title":"Resources","url":"https://projectpythia.org/resource-gallery/"},{"title":"Community","url":"https://projectpythia.org/#join-us"}],"actions":[{"title":"Project Pythia","url":"https://projectpythia.org","internal":false,"static":false}],"projects":[{"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"title":"ICESat-2 Tutorials","authors":[{"nameParsed":{"literal":"ICESat-2 team","given":"ICESat-2","family":"team"},"name":"ICESat-2 team","id":"contributors-myst-generated-uid-0"}],"contributors":[{"id":"brian-rose","nameParsed":{"literal":"Brian E. J. Rose","given":"Brian E. J.","family":"Rose"},"name":"Brian E. J. Rose","orcid":"0000-0002-9961-3821","email":"brose@albany.edu","affiliations":["UAlbany"],"url":"https://brian-rose.github.io","github":"brian-rose","bluesky":"@brianejrose.bsky.social","linkedin":"https://www.linkedin.com/in/brian-rose-37bb55106/"},{"id":"clyne","nameParsed":{"literal":"John Clyne","given":"John","family":"Clyne"},"name":"John Clyne","orcid":"0000-0003-2788-9017","affiliations":["CISL"],"github":"clyne"},{"id":"jukent","nameParsed":{"literal":"Julia Kent","given":"Julia","family":"Kent"},"name":"Julia Kent","orcid":"0000-0002-5611-8986","affiliations":["CISL"],"github":"jukent"},{"id":"ktyle","nameParsed":{"literal":"Kevin Tyle","given":"Kevin","family":"Tyle"},"name":"Kevin Tyle","orcid":"0000-0001-5249-9665","affiliations":["UAlbany"],"github":"ktyle"},{"id":"andersy005","nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","orcid":"0000-0001-6583-571X","affiliations":["CarbonPlan"],"github":"andersy005"},{"id":"dcamron","nameParsed":{"literal":"Drew Camron","given":"Drew","family":"Camron"},"name":"Drew Camron","orcid":"0000-0001-7246-6502","affiliations":["Unidata"],"github":"dcamron"},{"id":"dopplershift","nameParsed":{"literal":"Ryan May","given":"Ryan","family":"May"},"name":"Ryan May","orcid":"0000-0003-2907-038X","affiliations":["Unidata"],"github":"dopplershift"},{"id":"mgrover1","nameParsed":{"literal":"Maxwell Grover","given":"Maxwell","family":"Grover"},"name":"Maxwell Grover","orcid":"0000-0002-0370-8974","affiliations":["Argonne"],"github":"mgrover1"},{"id":"r-ford","nameParsed":{"literal":"Robert R. Ford","given":"Robert R.","family":"Ford"},"name":"Robert R. Ford","orcid":"0000-0001-5483-4965","affiliations":["UAlbany"],"github":"r-ford"},{"id":"kmpaul","nameParsed":{"literal":"Kevin Paul","given":"Kevin","family":"Paul"},"name":"Kevin Paul","orcid":"0000-0001-8155-8038","affiliations":["NVIDIA"],"github":"kmpaul"},{"id":"jnmorley","nameParsed":{"literal":"James Morley","given":"James","family":"Morley"},"name":"James Morley","orcid":"0009-0005-5193-7981","github":"jnmorley"},{"id":"erogluorhan","nameParsed":{"literal":"Orhan Eroglu","given":"Orhan","family":"Eroglu"},"name":"Orhan Eroglu","orcid":"0000-0003-3099-8775","affiliations":["CISL"],"github":"erogluorhan"},{"id":"lkailynncar","nameParsed":{"literal":"Lily Kailyn","given":"Lily","family":"Kailyn"},"name":"Lily Kailyn","orcid":"0009-0002-0125-5091","affiliations":["CISL"],"github":"lkailynncar"},{"id":"anissa111","nameParsed":{"literal":"Anissa Zacharias","given":"Anissa","family":"Zacharias"},"name":"Anissa Zacharias","orcid":"0000-0002-2666-8493","affiliations":["CISL"],"github":"anissa111"},{"id":"kafitzgerald","nameParsed":{"literal":"Katelyn FitzGerald","given":"Katelyn","family":"FitzGerald"},"name":"Katelyn FitzGerald","orcid":"0000-0003-4184-1917","affiliations":["CISL"],"github":"kafitzgerald"}],"github":"https://github.com/ICESAT-2HackWeek/icesat2-cookbook","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"copyright":"2025","references":{"foundations":{"url":"https://foundations.projectpythia.org"},"xarray":{"url":"https://docs.xarray.dev/en/stable"},"matplotlib":{"url":"https://matplotlib.org/stable"}},"thebe":{"binder":{"url":"https://mybinder.org/","provider":"github","repo":"projectpythia/cookbook-template","ref":"HEAD"}},"toc":[{"file":"README.md"},{"children":[{"file":"notebooks/how-to-cite.md"}],"title":"Preamble"},{"children":[{"file":"notebooks/mission-overview.ipynb"},{"file":"notebooks/data-access.ipynb"},{"file":"notebooks/filtering.ipynb"},{"file":"notebooks/geospatial-transforms.ipynb"},{"file":"notebooks/data-integration.ipynb"},{"file":"notebooks/cloud-computing.ipynb"},{"file":"notebooks/machine-learning.ipynb"},{"file":"notebooks/visualization.ipynb"}],"title":"Foundations"},{"children":[{"file":"notebooks/land-ice.ipynb"},{"file":"notebooks/sea-ice.ipynb"},{"file":"notebooks/inland-hydrology.ipynb"},{"file":"notebooks/bathymetry.ipynb"},{"file":"notebooks/snowdepth.ipynb"}],"title":"Example Workflows"}],"thumbnail":"/icesat2-cookbook/_preview/7/build/7f613ecccd986df1d247a99280f744c5.jpeg","exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Preamble"},{"slug":"notebooks.how-to-cite","title":"How to Cite This Cookbook","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/72a08caa5cbe5f9cce5999dbd1a81dfd.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Foundations"},{"slug":"notebooks.mission-overview","title":"ICESat-2 Mission Overview","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/6658703fc36e20fd253169cb1ed19215.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.filtering","title":"Cloud effects on ICESat-2 data,  and Data Filtering","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/ATL06_segment_model-c5b1aad2cc8269892f6f9bddba8df3ad.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.geospatial-transforms","title":"Geospatial Transforms","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.data-integration","title":"Data Integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.cloud-computing","title":"Cloud Computing","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.machine-learning","title":"Machine Learning","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.visualization","title":"Interactive Visualizion with Open Altimetry \u0026 Google Earth Engine","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Example Workflows"},{"slug":"notebooks.land-ice","title":"Land Ice Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.sea-ice","title":"Sea Ice Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-hydrology","title":"Inland Hydrology Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.bathymetry","title":"Bathymetry Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snowdepth","title":"Snowdepth Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":2,"kind":"Notebook","sha256":"ac3d9442da84a919a0a26f43d67692cd342370c4b4c7525e70a23028f9564f27","slug":"notebooks.visualization","location":"/notebooks/visualization.ipynb","dependencies":[],"frontmatter":{"title":"Interactive Visualizion with Open Altimetry \u0026 Google Earth Engine","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"is2cb","language":"python"},"authors":[{"nameParsed":{"literal":"ICESat-2 team","given":"ICESat-2","family":"team"},"name":"ICESat-2 team","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/ICESAT-2HackWeek/icesat2-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ICESAT-2HackWeek/icesat2-cookbook/blob/HEAD/notebooks/visualization.ipynb","thumbnail":"/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg","exports":[{"format":"ipynb","filename":"visualization.ipynb","url":"/icesat2-cookbook/_preview/7/build/visualization-5ce6c733f6a1ab656d77d0c1d30dead2.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"tags":[],"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"By Philipp Arndt, Chancelor Roberts ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VajaCjLMV6"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mwFlGcGwiN"},{"type":"text","value":"Scripps Institution of Oceanography, University of California San Diego ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YUJ2x8VijG"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qAR6Dkt3CG"},{"type":"text","value":"Github: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WTF6jYtdfM"},{"type":"link","url":"https://github.com/fliphilipp","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"cite","identifier":"fliphilipp","label":"fliphilipp","kind":"narrative","position":{"start":{"line":3,"column":122},"end":{"line":3,"column":133}},"error":"not found","key":"gLAVBbhAZU"}],"urlSource":"https://github.com/fliphilipp","error":true,"key":"HrhYQaN9SR"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TIYyNO42Fr"},{"type":"link","url":"https://github.com/chancelorr","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"cite","identifier":"chancelorr","label":"chancelorr","kind":"narrative","position":{"start":{"line":3,"column":168},"end":{"line":3,"column":179}},"error":"not found","key":"FpNBpAjdL7"}],"urlSource":"https://github.com/chancelorr","error":true,"key":"U23qbBOPJN"},{"type":"text","value":" ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ToWYJBb8DI"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rG4xfx3Gse"},{"type":"text","value":"Contact: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"u6xDEjkkgN"},{"type":"link","url":"mailto:ccroberts@ucsd.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"ccroberts@ucsd.edu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xaq8AUscJC"}],"urlSource":"mailto:ccroberts@ucsd.edu","key":"vxBNjnAvwz"}],"key":"JQH6E3vNZH"},{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"gBg7CqwJLX"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"Ok43crt4xK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Discover some interesting ICESat-2 data by browsing ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"jwQTRmjKjA"},{"type":"link","url":"https://openaltimetry.org/data/icesat2/","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"OpenAltimetry","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"X1XgspVhsH"}],"urlSource":"https://openaltimetry.org/data/icesat2/","key":"SnPlpKnorX"}],"key":"TeYap1n7ph"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Get the data into a Jupyter Notebook, plot it and overlay the ground track on a map","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"K4z1bDRTNr"}],"key":"xK3gWOB7aA"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"TNk8djY0Qe"},{"type":"link","url":"https://earthengine.google.com/","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Google Earth Engine","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"p07UUeBV31"}],"urlSource":"https://earthengine.google.com/","key":"CcOlVahkSe"},{"type":"text","value":" to find the closest-in-time Sentinel-2 image that is cloud-free along ICESat-2’s gound track","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vxVnr9hjQU"}],"key":"fxlu015ep6"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Make a plot from ICESat-2 data and contemporaneous imagery in Jupyter/matplotlib","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"AJRqDIn0Rf"}],"key":"fuQrcg1H4P"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Bonus Code: Use Google Earth Engine to extract Sentinel-2 data along the ICESat-2 ground track","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"OPAf5JWKzD"}],"key":"vFqdfKLMrH"}],"key":"ABPYesye5d"}],"visibility":"show","key":"BP96yjuvte"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Computing environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p0pRxzD7SU"}],"identifier":"computing-environment","label":"Computing environment","html_id":"computing-environment","implicit":true,"key":"mhv14q6umV"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’ll be using the following Python libraries in this notebook:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qJv2y0Zbq2"}],"key":"V4t8DRuTL9"}],"key":"oqpWRzqtcp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#%matplotlib widget \nimport os\nimport ee\nimport geemap\nimport requests\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pylab as plt\nfrom datetime import datetime\nfrom datetime import timedelta\nfrom ipywidgets import Layout\nimport rasterio as rio\nfrom rasterio import plot as rioplot\nfrom rasterio import warp","visibility":"show","key":"pk2pVN3tH1"},{"type":"output","id":"hH10ubyW4UlwyNHWtSUJm","data":[{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mModuleNotFoundError\u001b[39m                       Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[1]\u001b[39m\u001b[32m, line 3\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m#%matplotlib widget \u001b[39;00m\n\u001b[32m      2\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mos\u001b[39;00m\n\u001b[32m----\u003e \u001b[39m\u001b[32m3\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mee\u001b[39;00m\n\u001b[32m      4\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mgeemap\u001b[39;00m\n\u001b[32m      5\u001b[39m \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mrequests\u001b[39;00m\n\n\u001b[31mModuleNotFoundError\u001b[39m: No module named 'ee'","ename":"ModuleNotFoundError","evalue":"No module named 'ee'"}],"visibility":"show","key":"vT2wOXNTRZ"}],"visibility":"show","key":"ESqjEsXLUn"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The import below is a class that I wrote myself. It helps us read and store data from the OpenAltimetry API.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"nL5upgyxSr"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hkzNNbUiLg"},{"type":"text","value":"If you are interested in how this works, you can find the code in ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jkc9l6eYMM"},{"type":"inlineCode","value":"utils/oa.py","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kP7tLHD9gZ"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"teXnigb8o8"}],"key":"wf5iAvOjCj"}],"key":"GFnNPTBQXg"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import utils.oa as oa\nfrom utils.oa import dataCollector","visibility":"show","key":"SXq5qimGiL"},{"type":"output","id":"-qBhvwFoZYjFo6Umn3uq8","data":[],"visibility":"show","key":"hoMpILIB5T"}],"visibility":"show","key":"GZLXnm0qLo"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Google Earth Engine Authentication and Initialization","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TP3gDFsLJ1"}],"identifier":"google-earth-engine-authentication-and-initialization","label":"Google Earth Engine Authentication and Initialization","html_id":"google-earth-engine-authentication-and-initialization","implicit":true,"key":"O5qJ9GASIj"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"GEE requires you to authenticate your access, so if ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"XY8ZveY1BD"},{"type":"inlineCode","value":"ee.Initialize()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"HjUFFzPI4y"},{"type":"text","value":" does not work you first need to run ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"gyA7cvfxvR"},{"type":"inlineCode","value":"ee.Authenticate()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"OUwuA7t3Wp"},{"type":"text","value":". This gives you a link at which you can use your google account that is associated with GEE to get an authorization code. Copy the authorization code into the input field and hit ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YswNYLzjWf"},{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"enter","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Xi9Bl1Y8bC"}],"key":"A96GHrwdIl"},{"type":"text","value":" to complete authentication.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PS9nD5FmP1"}],"key":"QJoqRrP1Lf"}],"key":"dGYujAutjf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"try:\n    ee.Initialize()\nexcept: \n    ee.Authenticate()\n    ee.Initialize()","visibility":"show","key":"YWPZU5E0GJ"},{"type":"output","id":"fov-x8ebRV7dlpGYaqqJv","data":[],"visibility":"show","key":"pnJIpPPTPJ"}],"visibility":"show","key":"XWKcolCtL3"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Downloading data from the OpenAltimetry API","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZucU7Etgr5"}],"identifier":"downloading-data-from-the-openaltimetry-api","label":"Downloading data from the OpenAltimetry API","html_id":"downloading-data-from-the-openaltimetry-api","implicit":true,"key":"uVQwERDCCs"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s say we have found some data that looks weird to us, and we don’t know what’s going on.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"k6YTY4VS6l"}],"key":"N76d2KJ1sa"},{"type":"image","url":"/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg","alt":"image showing OpenAltimetry screenshot","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"lRnYTMExz4","urlSource":"https://raw.githubusercontent.com/fliphilipp/images/main/oa-data.jpg"},{"type":"heading","depth":3,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"A short explanation of how I got the data:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YXqHJNN55k"}],"identifier":"a-short-explanation-of-how-i-got-the-data","label":"A short explanation of how I got the data:","html_id":"a-short-explanation-of-how-i-got-the-data","implicit":true,"key":"HxJLuBHYy2"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"I went to ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"GB92QBWLzm"},{"type":"link","url":"https://openaltimetry.org/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"openaltimetry.org","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"YnMBbFJsi9"}],"urlSource":"https://openaltimetry.org/","key":"JK9D8TpB5S"},{"type":"text","value":" and selected ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Hu0ZOoPnWY"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"BROWSE ICESAT-2 DATA","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"CH8H2npW6E"}],"key":"JPcw3Axu7q"},{"type":"text","value":". Then I selected ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"CQajgZ0aeg"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"ATL 06","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ipQMJcmRFf"}],"key":"OCjPlrPCMk"},{"type":"text","value":" (Land Ice Height) on the top right, and switched the projection🌎 to ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VhG23z059y"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Arctic","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"aM8gVXGeUl"}],"key":"gZk4R0DnOt"},{"type":"text","value":". Then I selected ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"LfcNMs2y7Q"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"August 22, 2021","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"y2jnQUhNOx"}],"key":"hMPoZ633EL"},{"type":"text","value":" in the calendar📅 on the bottom left, and toggled the ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uTRCNMTlat"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"cloud","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ly0diolN6y"}],"key":"CLiAaqJ8v3"},{"type":"text","value":"☁️ button to show MODIS imagery of that date. I then zoomed in on my region of interest.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"EqNrYWqNcD"}],"key":"UgodIFqSd8"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"To find out what ICESat-2 has to offer here, I clicked on ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"d9JhLAaIex"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"SELECT A REGION","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"c6beqSDFUE"}],"key":"xS662D2kls"},{"type":"text","value":" on the top left, and drew a rectangle around that mysterious cloud. When right-clicking on that rectangle, I could select ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"xsfbnD1yJw"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"View Elevation profile","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"YCPNjGCTed"}],"key":"tnlo5dBhyV"},{"type":"text","value":". This opened a new tab, and showed me ATL06 and ATL08 elevations.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"VCu9qAiudA"}],"key":"zlL5u5zlIj"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"It looks like ATL06 can’t decide where the surface is, and ATL08 tells me that there’s a forest canopy on the Greenland Ice Sheet? To get to the bottom of this, I scrolled all the way down and selected 🛈","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"z8HffnIp4V"},{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Get API URL","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"gFPfXNNp1t"}],"key":"JwsOhUsOxN"},{"type":"text","value":". The website confirms that the ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"XAegzCRut0"},{"type":"emphasis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"“API endpoint was copied to clipboard.”","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"VNNcZbAMys"}],"key":"fDb1LEFmev"},{"type":"text","value":" Now I can use this to access the data myself.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"qcjB5mMEye"}],"key":"XK5FKtbr07"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Note: Instead of trying to find this region yourself, you can access the OpenAltimetry page shown above by going to ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"NJppDglp9z"},{"type":"link","url":"http://openaltimetry.org/data/icesat2/?annoId=580\u0026shareKey=d8bebfb8251a69b5b7e2e05df6fd5ca5","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"this annotation🏷️","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"UVAPOcb1O9"}],"urlSource":"http://openaltimetry.org/data/icesat2/?annoId=580\u0026shareKey=d8bebfb8251a69b5b7e2e05df6fd5ca5","key":"TWbLI4WXgW"},{"type":"text","value":". Just left-click on the red box and select “View Elevation Profile”.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"depexuwEfk"}],"key":"p7CHhIZGcr"}],"key":"UkzVnoKn2r"}],"key":"LFvxg3VoLu"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Getting the OpenAltimetry info into python","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ULr6towDng"}],"identifier":"getting-the-openaltimetry-info-into-python","label":"Getting the OpenAltimetry info into python","html_id":"getting-the-openaltimetry-info-into-python","implicit":true,"key":"AJmfM26bXP"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"All we need to do is to paste the API URL that we copied from the webpage into a string.\nWe also need to specify which beam we would like to look at. The ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JgfzlLnd8L"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"GT1R","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Bj0MwNWajS"}],"key":"Qfu95ckWRO"},{"type":"text","value":" ground track looks funky, so let’s look at that one!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"VZZWGRxxOk"}],"key":"kZsBQJYID8"}],"key":"weMVGPg0F1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# paste the API URL from OpenAltimetry below, and specify the beam you are interested in\noa_api_url = 'https://openaltimetry.earthdatacloud.nasa.gov/data/icesat2/elevation?minx=-25.4835556641541\u0026miny=76.44321462688005\u0026maxx=-21.976284749133928\u0026maxy=77.33633089376721\u0026zoom_level=5\u0026beams=1,2,3,4,5,6\u0026tracks=1236\u0026date=2024-09-06\u0026product=ATL06\u0026mapType=arctic'\ngtx = 'gt1r'","visibility":"show","key":"tsVPpwFIba"},{"type":"output","id":"sur9zrFodNYKAZalQFrwP","data":[],"visibility":"show","key":"QZgAGEmOl3"}],"visibility":"show","key":"zpmyqGFV02"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We can now initialize a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JHI6rSPOgR"},{"type":"inlineCode","value":"dataCollector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c7Ep0WE9gm"},{"type":"text","value":" object, using the copy-pasted OpenAltimetry API URL, and the beam we would like to look at. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b0ew9Ui3Xo"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v9TvBz4wwi"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"(Again, I defined this class in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JyAMBFi4SC"},{"type":"inlineCode","value":"utils/oa.py","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zG153auwa2"},{"type":"text","value":" to do some work for us in the background.)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"silR4VlXuh"}],"key":"MpYSFTsuMA"}],"key":"Jp0roM9eN2"}],"key":"Dvs4OlF8Hi"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"is2data = dataCollector(oaurl=oa_api_url, beam=gtx, verbose=True)","visibility":"show","key":"J2RA1x8KRR"},{"type":"output","id":"jvjViecwyrquMDGWrbiqs","data":[],"visibility":"show","key":"CrXAu8BIQE"}],"visibility":"show","key":"jt8yELn6Md"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Alternatively, we could use a date, track number, beam, and lat/lon bounding box as input to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hj1JlMGej9"},{"type":"inlineCode","value":"dataCollector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WKuVWuoswg"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CFOSYryjAF"}],"key":"Pi1uZrUpBh"}],"key":"q4nv5Nqfst"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"date = '2021-08-22'\nrgt = 909\nbeam = 'gt1r'\nlatlims = [77.5326, 77.5722]\nlonlims = [-23.9891, -23.9503]\nis2data = dataCollector(date=date, latlims=latlims, lonlims=lonlims, track=rgt, beam=beam, verbose=True)","visibility":"show","key":"UM2kWHqjQg"},{"type":"output","id":"oABmrlJa0kLk1gOIZyFFK","data":[],"visibility":"show","key":"wMNzPPScbG"}],"visibility":"show","key":"Iqi3MOjPKA"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note that this also constructs the API url for us.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lO51MaRttO"}],"key":"tNWsAIYimC"}],"key":"pL7UI3Re3B"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Requesting the data from the OpenAltimetry API","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"o3K4T5JvS4"}],"identifier":"requesting-the-data-from-the-openaltimetry-api","label":"Requesting the data from the OpenAltimetry API","html_id":"requesting-the-data-from-the-openaltimetry-api","implicit":true,"key":"szw5GjR8PQ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Here we use the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"W53xi6EnEA"},{"type":"inlineCode","value":"requestData()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"aSagK2Ibhq"},{"type":"text","value":" function of the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jPRJdrDohK"},{"type":"inlineCode","value":"dataCollector","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Y6scIkDR38"},{"type":"text","value":" class, which is defined in ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"T7yjczJYoe"},{"type":"inlineCode","value":"utils/oa.py","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wiwGYGi3iW"},{"type":"text","value":". It downloads all data products that are available on OpenAltimetry based on the inputs with which we initialized our ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"F9oNuesH49"},{"type":"inlineCode","value":"dataCollector","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CZVh6cx4VM"},{"type":"text","value":", and writes them to pandas dataframes.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Bn4MCR8Usd"}],"key":"CfSCmz8jo7"}],"key":"zVrWzd92fC"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"is2data.requestData(verbose=True)","visibility":"show","key":"abpoTeClRX"},{"type":"output","id":"SlWhEsTEj3G0uRaU3jaVq","data":[],"visibility":"show","key":"JlRKJz9Bpm"}],"visibility":"show","key":"QFZ7lkWt4L"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The data are now stored as data frames in our ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uQfDH5cyZ5"},{"type":"inlineCode","value":"dataCollector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CGQfn16iC4"},{"type":"text","value":" object. To verify this, we can run the cell below.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zq5L6i4jUc"}],"key":"iX0WD0Q9RP"}],"key":"ubJeFSE9R5"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"vars(is2data)","visibility":"show","key":"mnwBwq4ehO"},{"type":"output","id":"HvccIoKQjSSZPBGwQMbXt","data":[],"visibility":"show","key":"xG6CWAR8K2"}],"visibility":"show","key":"sABnutOID3"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plotting the ICESat-2 data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ehFX0cLrwQ"}],"identifier":"plotting-the-icesat-2-data","label":"Plotting the ICESat-2 data","html_id":"plotting-the-icesat-2-data","implicit":true,"key":"KftGqyP5hy"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now let’s plot this data. Here, we are just creating an empty figure ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"T1d5y2KZh0"},{"type":"inlineCode","value":"fig","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"gBbeND7CGw"},{"type":"text","value":" with axes ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JQZNoGN6J9"},{"type":"inlineCode","value":"ax","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dl3Og1OGEp"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yo5t2pVzuD"}],"key":"DzEZnTEspt"}],"key":"otBaUIEchh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# create the figure and axis\nfig, ax = plt.subplots(figsize=[9,5])\n\n# plot the data products\natl06, = ax.plot(is2data.atl06.lat, is2data.atl06.h, c='C0', linestyle='-', label='ATL06')\natl08, = ax.plot(is2data.atl08.lat, is2data.atl08.h, c='C2', linestyle=':', label='ATL08')\nif np.sum(~np.isnan(is2data.atl08.canopy))\u003e0:\n    atl08canopy = ax.scatter(is2data.atl08.lat, is2data.atl08.h+is2data.atl08.canopy, s=2, c='C2', label='ATL08 canopy')\n\n# add labels, title and legend\nax.set_xlabel('latitude')\nax.set_ylabel('elevation in meters')\nax.set_title('Some ICESat-2 data I found on OpenAltimetry!')\nax.legend(loc='upper left')\n\n# add some text to provide info on what is plotted\ninfo = 'ICESat-2 track {track:d}-{beam:s} on {date:s}\\n({lon:.4f}E, {lat:.4f}N)'.format(track=is2data.track, \n                                                                                        beam=is2data.beam.upper(), \n                                                                                        date=is2data.date, \n                                                                                        lon=np.mean(is2data.lonlims), \n                                                                                        lat=np.mean(is2data.latlims))\ninfotext = ax.text(0.01, -0.08, info,\n                   horizontalalignment='left', \n                   verticalalignment='top', \n                   transform=ax.transAxes,\n                   fontsize=7,\n                   bbox=dict(edgecolor=None, facecolor='white', alpha=0.9, linewidth=0))\n\n# set the axis limits\nax.set_xlim((is2data.atl03.lat.min(), is2data.atl03.lat.max()))\nax.set_ylim((741, 818));","visibility":"show","key":"HT0LUr1iDN"},{"type":"output","id":"KQbeVHLeSjP-NXSb0bZ6O","data":[],"visibility":"show","key":"w6VUtbbiz6"}],"visibility":"show","key":"PlTRHdUVDT"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s add the ATL03 photons to better understand what might be going on here.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FhCt2RslnG"}],"key":"X5TafiXWNI"}],"key":"HVtcQQjfVN"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"atl03 = ax.scatter(is2data.atl03.lat, is2data.atl03.h, s=1, color='black', label='ATL03', zorder=-1)\nax.legend(loc='upper left')\nfig.tight_layout()\ndisplay(fig)","visibility":"show","key":"T4xcpKPOqb"},{"type":"output","id":"BgDehL__gdj06ux-nksYQ","data":[],"visibility":"show","key":"vaIJJz5RFp"}],"visibility":"show","key":"NrqS9laMVZ"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Saving the plot to a file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DdNeyoGdMC"}],"identifier":"saving-the-plot-to-a-file","label":"Saving the plot to a file","html_id":"saving-the-plot-to-a-file","implicit":true,"key":"Hn8zNPV3nE"}],"key":"tnOS7um1Ml"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig.savefig('my-plot.jpg', dpi=300)","visibility":"show","key":"ZDfP9MPEcK"},{"type":"output","id":"g6lg8kMuMelTa7u0WBxQm","data":[],"visibility":"show","key":"tmOd89Q3Pm"}],"visibility":"show","key":"OpWUEJ2ljw"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To make plots easier to produce, the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ic4RJpW7rn"},{"type":"inlineCode","value":"dataCollector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NN0BJx7HEP"},{"type":"text","value":" class also has a method to plot the data that we downloaded.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MeGThlUBYz"}],"key":"upo07Esfo8"}],"key":"qYa2Vv2XNu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = is2data.plotData();\nfig","visibility":"show","key":"E6i0HxET32"},{"type":"output","id":"idgnuEMmurhTx3dlLkB7c","data":[],"visibility":"show","key":"J7TlkEQdNU"}],"visibility":"show","key":"YSVXKpV6sC"},{"type":"block","kind":"notebook-content","data":{"tags":[],"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ground Track Stats","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LYtw8w5u2V"}],"identifier":"ground-track-stats","label":"Ground Track Stats","html_id":"ground-track-stats","implicit":true,"key":"hQgzsAA3v5"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"So far we have only seen the data in elevation vs. latitude space. It’s probably good to know what the scale on the x-axis is here in units that we’re familiar with.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"r1CODXZCKv"}],"key":"NlsYLzqu5W"}],"visibility":"show","key":"IG4dCXHGh8"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def dist_latlon2meters(lat1, lon1, lat2, lon2):\n    # returns the distance between two coordinate points - (lon1, lat1) and (lon2, lat2) along the earth's surface in meters.\n    R = 6371000\n    def deg2rad(deg):\n        return deg * (np.pi/180)\n    dlat = deg2rad(lat2-lat1)\n    dlon = deg2rad(lon2-lon1)\n    a = np.sin(dlat/2) * np.sin(dlat/2) + np.cos(deg2rad(lat1)) * np.cos(deg2rad(lat2)) * np.sin(dlon/2) * np.sin(dlon/2)\n    c = 2 * np.arctan2(np.sqrt(a), np.sqrt(1-a))\n    return R * c\n\nlat1, lat2 = is2data.atl08.lat[0], is2data.atl08.lat.iloc[-1]\nlon1, lon2 = is2data.atl08.lon[0], is2data.atl08.lon.iloc[-1]\n\nground_track_length = dist_latlon2meters(lat1, lon1, lat2, lon2)\nprint('The ground track is about %.1f kilometers long.' % (ground_track_length/1e3))","visibility":"show","key":"DTkSuiJITG"},{"type":"output","id":"_BhYNy_1BYuaWoVa4_lHf","data":[],"visibility":"show","key":"tlazUOwNtY"}],"visibility":"show","key":"HbGmGxyQsT"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Google Earth Engine","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wcimzvO24A"}],"identifier":"google-earth-engine","label":"Google Earth Engine","html_id":"google-earth-engine","implicit":true,"key":"e8IG3Pc5aN"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Google Earth Engine (GEE) has a large ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HQ9wDNKelz"},{"type":"link","url":"https://developers.google.com/earth-engine/datasets","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"catalog","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"g0CDQ8jUIH"}],"urlSource":"https://developers.google.com/earth-engine/datasets","key":"zwBsAmoT46"},{"type":"text","value":" of geospatial raster data, which is ready for analysis in the cloud. It also comes with an online JavaScript code editor.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JeiqUlgRwC"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tjhySJIBfa"},{"type":"image","url":"/icesat2-cookbook/_preview/7/build/697fd195613a884d70f9711b06c8e49f.png","alt":"gif showing how to get to the data in OpenAltimetry","width":"400px","key":"fjL7LoUK6y","urlSource":"https://raw.githubusercontent.com/fliphilipp/images/main/gee_codeeditor.png"},{"type":"text","value":"\nBut since we all seem to be using python, it would be nice to have these capabilities available in our Jupyter comfort zone...","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i6yJdfnvDM"}],"key":"r8K8xBiHt0"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Thankfully, there is a ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ZDFq8IjXtY"},{"type":"link","url":"https://developers.google.com/earth-engine/tutorials/community/intro-to-python-api","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"python API for GEE","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NuE5vraroO"}],"urlSource":"https://developers.google.com/earth-engine/tutorials/community/intro-to-python-api","key":"gafbnvbp3z"},{"type":"text","value":", which we have imported using ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"AeNCa5imLk"},{"type":"inlineCode","value":"import ee","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"R3vkkPzpgQ"},{"type":"text","value":" earlier. It doesn’t come with an interactive map, but the python package ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FZnVYGQlUy"},{"type":"link","url":"https://geemap.org/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"geemap","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pkHSmovAPh"}],"urlSource":"https://geemap.org/","key":"TUXkd5pwCH"},{"type":"text","value":" has us covered!","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tONbGwrm3S"}],"key":"j71DMBuZPO"}],"key":"sOSF3CC8Cn"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show a ground track on a map","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cCr5Sd5PcN"}],"identifier":"show-a-ground-track-on-a-map","label":"Show a ground track on a map","html_id":"show-a-ground-track-on-a-map","implicit":true,"key":"tl7YwmQSyq"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We can start working on our map by calling ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"heavlAiTdx"},{"type":"inlineCode","value":"geemap.Map()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"oZOBGF37D1"},{"type":"text","value":". This just gives us a world map with a standard basemap.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TcGWG02Bbj"}],"key":"lWiydEz5KL"}],"key":"S293fkH3Nx"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from ipywidgets import Layout\nMap = geemap.Map(layout=Layout(width='70%', max_height='450px'))\nMap","visibility":"show","key":"IHU52Wsip9"},{"type":"output","id":"C_Wvot-1sKB5HiGPYaaRy","data":[],"visibility":"show","key":"Fq897omKKn"}],"visibility":"show","key":"Vw2p68rzVU"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now we need to add our ICESat-2 gound track to that map. Let’s use the lon/lat coordinates of the ATL08 data product for this.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aKrkWqlFCo"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TmrDcS42Iu"},{"type":"text","value":"We also need to specify which ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PabDC9sL7a"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Coordinate Reference System (CRS)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sRHS2GLNDS"}],"key":"v6aJPWk0me"},{"type":"text","value":" our data is in. The longitude/latitude system that we are all quite familiar with is referenced by ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JJP8l8HdR1"},{"type":"link","url":"https://epsg.io/4326","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"EPSG:4326","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fjlnBYaOLd"}],"urlSource":"https://epsg.io/4326","key":"CdiNr6fh4z"},{"type":"text","value":". To add the ground track to the map we need to turn it into an ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LHtZLJqTl0"},{"type":"link","url":"https://developers.google.com/earth-engine/guides/feature_collections","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Earth Engine “Feature Collection”","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VGL5EDdQii"}],"urlSource":"https://developers.google.com/earth-engine/guides/feature_collections","key":"EZY8PiA3iQ"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OMGwXXW3tQ"}],"key":"HrjOtrZv9y"}],"key":"G6HnSfKW9j"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ground_track_coordinates = list(zip(is2data.atl08.lon, is2data.atl08.lat))\nground_track_projection = 'EPSG:4326' # \u003c-- this specifies that our data longitude/latitude in degrees [https://epsg.io/4326]\ngtx_feature = ee.FeatureCollection(ee.Geometry.LineString(coords=ground_track_coordinates, \n                                      proj=ground_track_projection, \n                                      geodesic=True))\ngtx_feature","visibility":"show","key":"BdCPrv144x"},{"type":"output","id":"gJSwtud5edzDbqE82CTPc","data":[],"visibility":"show","key":"suKUHy2fxQ"}],"visibility":"show","key":"gZ83a34yfL"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have it in the right format, we can add it as a ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ncZIjEvS95"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"layer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kRm3ACmASy"}],"key":"hxgGZJXpr7"},{"type":"text","value":" to the map.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CjZeuJjtTv"}],"key":"JfjGbuzfsm"}],"key":"wAiQ14xD7T"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"Map.addLayer(gtx_feature, {'color': 'red'}, 'ground track')","visibility":"show","key":"kezdFzylzw"},{"type":"output","id":"fLF7Iorwuv3BUu3TlB-k6","data":[],"visibility":"show","key":"M7QqJlHjOq"}],"visibility":"show","key":"eBZBNXB7nj"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"According to the cell above this should be a red line. But we still can’t see it, because we first need to tell the map where to look for it.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OOEDHOCwCe"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OSqlyhKhhv"},{"type":"text","value":"Let’s calculate the center longitude and latitude, and center the map on it.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a1KGE3aQWJ"}],"key":"De9YJ5eK2B"}],"key":"TXhfkEg92M"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"center_lon = (lon1 + lon2) / 2\ncenter_lat = (lat1 + lat2) / 2\nMap.setCenter(center_lon, center_lat, zoom=7);","visibility":"show","key":"obyBt6eEDD"},{"type":"output","id":"4w3xKUcbC9cr8sl7nqh3V","data":[],"visibility":"show","key":"LGzhPildIA"}],"visibility":"show","key":"jamJeFWxNW"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"So we actually couldn’t see it because it was in Greenland.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tzY0rHH5Pi"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ok0zyrcZBA"},{"type":"text","value":"Unfortunately the basemap here doesn’t give us much more information. Let’s add a satellite imagery basemap.\nThis is a good time to look at the layer control on the top right.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NzioI6Cchv"}],"key":"rMTWRGwELt"}],"key":"OhkvxOhG6D"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"Map.add_basemap('SATELLITE') # \u003c-- this adds a layer called 'Google Satellite'\nMap.setCenter(center_lon, center_lat, zoom=7);\nMap.addLayer(gtx_feature,{'color': 'red'},'ground track')","visibility":"show","key":"YnuDj02xor"},{"type":"output","id":"qrqggPjriRU5aaOjlMcFR","data":[],"visibility":"show","key":"osrgq3GIlg"}],"visibility":"show","key":"R0YLo6PyfX"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"...looks like this basemap still doesn’t give us any more clues about the nature of this weird ICESat-2 data. Let’s dig deeper.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Idi98EoAr0"}],"key":"XT5Ws7V6Uq"}],"key":"b1JmNUKG4o"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Query for Sentinel-2 images","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yBlF8Zvqvl"}],"identifier":"query-for-sentinel-2-images","label":"Query for Sentinel-2 images","html_id":"query-for-sentinel-2-images","implicit":true,"key":"vnkqhCsqGG"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Both of these Sentinel-2 satellites take images of most places on our planet at least every week or so. Maybe these images can tell us what was happening here around the same time that ICESat-2 acquired our data?","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"RzmK26CQSj"}],"key":"ERLwyrNJL0"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The imagery scenes live in image collections on Google Earth Engine.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pVPo0KX5RB"},{"type":"break","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"n3Q2WqIQdr"},{"type":"text","value":"You can find all collections here: ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"nVR7Gt5Ta7"},{"type":"link","url":"https://developers.google.com/earth-engine/datasets/catalog/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"https://​developers​.google​.com​/earth​-engine​/datasets​/catalog/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"stYyH1OLwG"}],"urlSource":"https://developers.google.com/earth-engine/datasets/catalog/","key":"qtNaI1GsOZ"}],"key":"nK3phD11Bo"}],"key":"yXW21ZtVKD"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The above link tells us we can find some images under ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LEAuB73yKR"},{"type":"inlineCode","value":"'COPERNICUS/S2_SR_HARMONIZED'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k2OXZmO5KF"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rHG65T8tAz"}],"key":"dYWoA3AsEj"}],"key":"eZjEPwUR48"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection_name1 = 'COPERNICUS/S2_SR_HARMONIZED'  # Landsat 8 earth engine collection \n# https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C01_T2","visibility":"show","key":"lxN6AlYt1f"},{"type":"output","id":"yanrixZbY7CUJaR49nSBN","data":[],"visibility":"show","key":"fsXhEhexll"}],"visibility":"show","key":"OXOEk7HvVw"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Access an image collection","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pZheaINMvN"}],"identifier":"access-an-image-collection","label":"Access an image collection","html_id":"access-an-image-collection","implicit":true,"key":"NlqCtpQY2o"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"To access the collection, we call ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"RG2o7vlxpp"},{"type":"inlineCode","value":"ee.ImageCollection","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kP6TnQs9k3"},{"type":"text","value":":","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"iPa6LRpN2e"}],"key":"FOqyim1t57"}],"key":"V6eRtTavZL"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection = ee.ImageCollection(collection_name1)\ncollection","visibility":"show","key":"KqRcQm9gLZ"},{"type":"output","id":"qBePIkBcaz0gsaBjtfFjP","data":[],"visibility":"show","key":"hsMUizUHGf"}],"visibility":"show","key":"CxA3AfPvwc"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Can we find out how many images there are in total?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vs49ffotmu"}],"key":"gaMBv1ZCcv"}],"key":"wDnb70KLCh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"number_of_scenes = collection.size()\nprint(number_of_scenes)","visibility":"show","key":"VAIKTmOF5m"},{"type":"output","id":"zavJjClmO09u-0uqn83-s","data":[],"visibility":"show","key":"IksVZg3ukl"}],"visibility":"show","key":"wlJSUVWFON"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Actually, asking for the size of the collection does not do anything!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nc8VJ3BZpU"}],"key":"wbYaWHl58q"},{"type":"text","value":" 🤔","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"M3bIIH5iat"}],"key":"crQCFLgAMo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"It just tells Earth Engine on the server-side that this variable refers to the size of the collection, which we may need later to do some analysis on the server. As long as this number is not needed, Earth Engine will not go through the trouble actually computing it.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EDE3mbGbar"}],"key":"nHEnY1dp0j"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To force Earth Engine to compute and get any information on the client side (our local machine / Cryocloud), we need to call ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iIbZo4k39p"},{"type":"inlineCode","value":".getInfo()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CVjsVJedgd"},{"type":"text","value":". In this case that would be ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"orgLK0OAfA"},{"type":"inlineCode","value":"number_of_scenes = collection.size().getInfo()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"c7hgKb1163"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dDAuDG2wjR"}],"key":"cLoPw2F2eh"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Because this command would ask Earth Engine to count every single Sentinel-2 file that exists, this command would take a really long time to execute. I will avoid this here and just give you the answer from when I wrote this tutorial.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Tr5HDyULLE"}],"key":"LQFSJ1Ar2e"}],"key":"g9RIG6nIe7"}],"key":"T7HuQUIlO7"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# number_of_scenes = collection.size().getInfo()\nnumber_of_scenes = 19323842\nprint('There are %i number of scenes in the image collection' % number_of_scenes)","visibility":"show","key":"pZfzSXyPq4"},{"type":"output","id":"1b3ad1IpCmSyQ9PAZ7_hO","data":[],"visibility":"show","key":"ooX4gErKEy"}],"visibility":"show","key":"VSbXy7Km06"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Filter an image collection by location and time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZeccODSBum"}],"identifier":"filter-an-image-collection-by-location-and-time","label":"Filter an image collection by location and time","html_id":"filter-an-image-collection-by-location-and-time","implicit":true,"key":"yVoFIp3AqB"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Who wants to look at almost 20 million pictures? I don’t. So let’s try to narrow it down.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"JJK7ZzkarH"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"M6pQXxpyJ8"},{"type":"text","value":"Let’s start with only images that overlap with the center of our ground track.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"lGeZ8Glj6c"}],"key":"F2aVeUY7NX"}],"key":"J2UGzJrkli"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# the point of interest (center of the track) as an Earth Engine Geometry\npoint_of_interest = ee.Geometry.Point(center_lon, center_lat)","visibility":"show","key":"cTQYY2IJR4"},{"type":"output","id":"jrmGTYzFTruQc5GxQO28E","data":[],"visibility":"show","key":"LkR9iDWa3q"}],"visibility":"show","key":"Go9bmGXeSf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection = collection.filterBounds(point_of_interest)","visibility":"show","key":"bI6F9K2V1n"},{"type":"output","id":"nV0H3TM1JFO1YFyRXZI6J","data":[],"visibility":"show","key":"muvJy11HuH"}],"visibility":"show","key":"a97jcOdeRM"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print('There are {number:d} images in the spatially filtered collection.'.format(number=collection.size().getInfo()))","visibility":"show","key":"Udfdivm1cC"},{"type":"output","id":"eM8lHNhujv7Xz2H0NYxMX","data":[],"visibility":"show","key":"LjiFrSbn3u"}],"visibility":"show","key":"cL22bZBXRh"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Much better! Now let’s only look at images that were taken soon before or after ICESat-2 passed over this spot.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vo2lf1x2GW"}],"key":"CWTCT5CFce"}],"key":"ZsjhXw5Lmt"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"days_buffer_imagery = 6","visibility":"show","key":"dYqen3ooDx"},{"type":"output","id":"fVnjZqAqfG0rZMn5hSZxM","data":[],"visibility":"show","key":"MnzvyAHbzK"}],"visibility":"show","key":"PLrBDVXIBK"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"dateformat = '%Y-%m-%d'\ndatetime_requested = datetime.strptime(is2data.date, dateformat)\nsearch_start = (datetime_requested - timedelta(days=days_buffer_imagery)).strftime(dateformat)\nsearch_end = (datetime_requested + timedelta(days=days_buffer_imagery)).strftime(dateformat)\nprint('Search for imagery from {start:s} to {end:s}.'.format(start=search_start, end=search_end))","visibility":"show","key":"xZLUwNpMG4"},{"type":"output","id":"mVACdJwGfy5pyS5m5x4Al","data":[],"visibility":"show","key":"I0xIa1mwwT"}],"visibility":"show","key":"kTM3hCHKUz"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection = collection.filterDate(search_start, search_end)\nprint('There are {number:d} images in the spatially filtered collection.'.format(number=collection.size().getInfo()))","visibility":"show","key":"gE7x61DsbQ"},{"type":"output","id":"HVZR363I9q3NsLjpU7sTa","data":[],"visibility":"show","key":"F72LDbXj6o"}],"visibility":"show","key":"sLe8qEpaS5"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also sort the collection by date (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ieHzG5hsYX"},{"type":"inlineCode","value":"'system:time_start'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AaSDm2dV6w"},{"type":"text","value":"), to order the images by acquisition time.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BxIgYprf1o"}],"key":"GlgqlICr3A"}],"key":"rjvmMeZSmA"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection = collection.sort('system:time_start') ","visibility":"show","key":"RffDhW9oMe"},{"type":"output","id":"-fLhNxUkd1KmdcyIpHFaw","data":[],"visibility":"show","key":"nz6ydFxEG6"}],"visibility":"show","key":"dBgGHchJgf"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get image collection info","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JgzGYJyOLi"}],"identifier":"get-image-collection-info","label":"Get image collection info","html_id":"get-image-collection-info","implicit":true,"key":"bXR7C0YAGG"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Again, we need to use ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"lmLiiNOcXe"},{"type":"inlineCode","value":".getInfo()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wgfUrQ3C3E"},{"type":"text","value":" to actually see any information on our end. This is a python dictionary.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ndYDcF6j2Q"}],"key":"jxrQY7nQTw"}],"key":"GnLx6IktYP"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"info = collection.getInfo()\ntype(info)","visibility":"show","key":"zKbrjGXtGo"},{"type":"output","id":"Vdp7tePPzv1G_TiMSvI_Z","data":[],"visibility":"show","key":"qd5RiRUzCU"}],"visibility":"show","key":"CJR6KiSKOn"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s see what’s inside!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fHqSh2R0Wd"}],"key":"nmaEpbLLPF"}],"key":"QiTTsXQzgp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"info.keys()","visibility":"show","key":"kFw5DzP3Je"},{"type":"output","id":"GHt_kHav9OWEcBVAYO6L7","data":[],"visibility":"show","key":"sRqVCIppOe"}],"visibility":"show","key":"dWOCxn0IBm"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"'features'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qULCTiHRa4"},{"type":"text","value":" sounds like it could hold information about the images we are trying to find...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TBYLu5rU6h"}],"key":"MDPhQ8zs9F"}],"key":"mXSequ6Q5B"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"len(info['features'])","visibility":"show","key":"WvOt75Zq0f"},{"type":"output","id":"oobZXqPYkhofNOmDcmjZH","data":[],"visibility":"show","key":"YngMsolj9L"}],"visibility":"show","key":"fDOzPBXFLo"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A list of 34 things! Those are probably the 34 images in the collection. Let’s pick the first one and dig deeper!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pt4vDbanQo"}],"key":"ekUGZH2HCf"}],"key":"ozBCcsL3zN"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"feature_number = 0\ninfo['features'][0].keys()","visibility":"show","key":"BiDah3SnfW"},{"type":"output","id":"4OWrf8WN06jTENF8xGpck","data":[],"visibility":"show","key":"uiy48RYgN1"}],"visibility":"show","key":"BG8jjz96AM"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"info['features'][feature_number]['id']","visibility":"show","key":"KynFpG5uHV"},{"type":"output","id":"cpa8x596jb-mz5kiLdRtz","data":[],"visibility":"show","key":"PDaH346y2n"}],"visibility":"show","key":"GuJkgydD9M"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Looks like we found a reference to a Sentinel-2 image! Let’s look at the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UnCyX4o9n7"},{"type":"inlineCode","value":"'bands'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FImj0nFqih"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qHWizf75TA"}],"key":"BGukTsFNzj"}],"key":"UKpBLDKHdk"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for band in info['features'][feature_number]['bands']:\n    print(band['id'], end=', ')","visibility":"show","key":"yPLqEqmAlq"},{"type":"output","id":"2fysED5AfXyGdvQOXR1zz","data":[],"visibility":"show","key":"IrsQf0glFG"}],"visibility":"show","key":"hoeVFa5Di3"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"'properties'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Anv2UQGz98"},{"type":"text","value":" could be useful too!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jhaNQAzqCw"}],"key":"ecQ5X8cvpl"}],"key":"TUHhRQmfXp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"info['features'][0]['properties'].keys()","visibility":"show","key":"imnn2MQlxo"},{"type":"output","id":"X9MAQpUaKZMtDXeKS65uU","data":[],"visibility":"show","key":"f7X0RcxeF3"}],"visibility":"show","key":"DjHRmlmAqq"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"That’s a lot going on right there! But ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iiuT7GVFli"},{"type":"inlineCode","value":"'GRANULE_ID'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u5Raa49DzA"},{"type":"text","value":" is probably useful. Let’s go through all our features and print the product id.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ifYQ5neFrW"}],"key":"z7qkrQpWz8"}],"key":"prw7iOA11u"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"for feature in info['features']:\n    print(feature['properties']['GRANULE_ID'])","visibility":"show","key":"jzhcE7Pb0w"},{"type":"output","id":"lfWvBb2jKQw5hmup9n8H9","data":[],"visibility":"show","key":"jDgBlCHCCd"}],"visibility":"show","key":"BsyRXfaDk0"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Add a Sentinel-2 image to the map","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gWduTdcFuy"}],"identifier":"add-a-sentinel-2-image-to-the-map","label":"Add a Sentinel-2 image to the map","html_id":"add-a-sentinel-2-image-to-the-map","implicit":true,"key":"mqpCvXPPKk"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The visible bands in Sentinel-2 are ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"M0tZN6xX50"},{"type":"inlineCode","value":"'B2'","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"L1KHL3bny7"},{"type":"text","value":":blue, ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"IPLVYGurhr"},{"type":"inlineCode","value":"'B3'","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"EG1b9rm89k"},{"type":"text","value":":green, ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MOlLLbPxkZ"},{"type":"inlineCode","value":"'B4'","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wVsS1X2xLh"},{"type":"text","value":":red.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cTZxLibTXI"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Z4zcdn6tqD"},{"type":"text","value":"So to show a “true color” RGB composite image on the map, we need to select these bands in the R-G-B order:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Er0ztCdgGO"}],"key":"tdBbVxjsLV"}],"key":"xF5CDv0maW"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"myImage = collection.first()\nmyImage_RGB = myImage.select('B4', 'B3', 'B2')\nvis_params = {'min': 0.0, 'max': 10000, 'opacity': 1.0, 'gamma': 1.5}\nMap.addLayer(myImage_RGB, vis_params, name='my image')\nMap.addLayer(gtx_feature,{'color': 'red'},'ground track')\nMap","visibility":"show","key":"QwxHW9T4AE"},{"type":"output","id":"ktrLL4MInUgxym4BBDjVs","data":[],"visibility":"show","key":"QWDhVw9KeE"}],"visibility":"show","key":"PXEzC4i6aU"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This seems to have worked. But there’s clouds everywhere.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SiFaeRHbI7"}],"key":"MQ4kTZZW2q"}],"key":"vhaY6YCKGX"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate the along-track cloud probability","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"siAmE0ZEIC"}],"identifier":"calculate-the-along-track-cloud-probability","label":"Calculate the along-track cloud probability","html_id":"calculate-the-along-track-cloud-probability","implicit":true,"key":"eQUgr62ZcJ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We need a better approach to get anywhere here. To do this, we use not only the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hN1ksK0Jdd"},{"type":"link","url":"https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_SR_HARMONIZED","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Sentinel-2 Surface Reflectance image collection","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"FyAY1LqTGz"}],"urlSource":"https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_SR_HARMONIZED","key":"Smg5eIiwdw"},{"type":"text","value":", but also merge it with the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"VQ07jxs66i"},{"type":"link","url":"https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_CLOUD_PROBABILITY","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Sentinel-2 cloud probability collection","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TgOlzsHzYe"}],"urlSource":"https://developers.google.com/earth-engine/datasets/catalog/COPERNICUS_S2_CLOUD_PROBABILITY","key":"WSMvUx1YlK"},{"type":"text","value":", which can be accessed under ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ViEnXuqo34"},{"type":"inlineCode","value":"COPERNICUS/S2_CLOUD_PROBABILITY","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yfHLDxNWoj"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"vUMri8UCc0"}],"key":"uOvroFvzNh"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Let’s specify a function that adds the cloud probability band to each Sentinel-2 image and calcultes the mean cloud probability in the neighborhood of the ICESat-2 ground track, then map this function over our location/date filtered collection.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fZBnU8JMlx"}],"key":"gy5Ivuk9al"}],"key":"CjG05s317a"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def get_sentinel2_cloud_collection(is2data, days_buffer=6, gt_buffer=100):\n    \n    # create the area of interest for cloud likelihood assessment\n    ground_track_coordinates = list(zip(is2data.atl08.lon, is2data.atl08.lat))\n    ground_track_projection = 'EPSG:4326' # our data is lon/lat in degrees [https://epsg.io/4326]\n    gtx_feature = ee.Geometry.LineString(coords=ground_track_coordinates,\n                                     proj=ground_track_projection,\n                                     geodesic=True)\n    area_of_interest = gtx_feature.buffer(gt_buffer)\n    \n    datetime_requested = datetime.strptime(is2data.date, '%Y-%m-%d')\n    start_date = (datetime_requested - timedelta(days=days_buffer)).strftime('%Y-%m-%dT%H:%M:%S')\n    end_date = (datetime_requested + timedelta(days=days_buffer)).strftime('%Y-%m-%dT%H:%M:%S')\n    print('Search for imagery from {start:s} to {end:s}.'.format(start=start_date, end=end_date))\n    \n    # Import and filter S2 SR HARMONIZED\n    s2_sr_collection = (ee.ImageCollection('COPERNICUS/S2_SR_HARMONIZED')\n        .filterBounds(area_of_interest)\n        .filterDate(start_date, end_date))\n\n    # Import and filter s2cloudless.\n    s2_cloudless_collection = (ee.ImageCollection('COPERNICUS/S2_CLOUD_PROBABILITY')\n        .filterBounds(area_of_interest)\n        .filterDate(start_date, end_date))\n\n    # Join the filtered s2cloudless collection to the SR collection by the 'system:index' property.\n    cloud_collection = ee.ImageCollection(ee.Join.saveFirst('s2cloudless').apply(**{\n        'primary': s2_sr_collection, 'secondary': s2_cloudless_collection,\n        'condition': ee.Filter.equals(**{'leftField': 'system:index','rightField': 'system:index'})}))\n\n    cloud_collection = cloud_collection.map(lambda img: img.addBands(ee.Image(img.get('s2cloudless')).select('probability')))\n    \n    def set_is2_cloudiness(img, aoi=area_of_interest):\n        cloudprob = img.select(['probability']).reduceRegion(reducer=ee.Reducer.mean(), \n                                                             geometry=aoi, \n                                                             bestEffort=True, \n                                                             maxPixels=1e6)\n        return img.set('ground_track_cloud_prob', cloudprob.get('probability'))\n    \n    return cloud_collection.map(set_is2_cloudiness)","visibility":"show","key":"dYbuwm92WD"},{"type":"output","id":"MqUzAQBFoU0ol0hlgvDza","data":[],"visibility":"show","key":"xc5wR3VltL"}],"visibility":"show","key":"MCSak2pJUp"},{"type":"block","kind":"notebook-content","data":{"tags":[],"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get this collection for our ICESat-2 data, and print all the granule IDs and associated cloudiness over the ground track.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EAEyWq4f7F"}],"key":"pewwJrA1DV"}],"visibility":"show","key":"bYvhL5ZEWV"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection = get_sentinel2_cloud_collection(is2data)\ninfo = collection.getInfo()\nfor feature in info['features']:\n    print('%s --\u003e along-track cloud probability: %5.1f %%' % (feature['properties']['GRANULE_ID'],\n                                                              feature['properties']['ground_track_cloud_prob']))","visibility":"show","key":"ak5UNoODtE"},{"type":"output","id":"SCmr4J1gnMxlGbvbSY5A_","data":[],"visibility":"show","key":"sZMW1zVhLO"}],"visibility":"show","key":"X49c6KlmVJ"},{"type":"block","kind":"notebook-content","data":{"tags":[],"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Filter cloudy images","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Bypumv7PPR"}],"identifier":"filter-cloudy-images","label":"Filter cloudy images","html_id":"filter-cloudy-images","implicit":true,"key":"H6nyQxb1Kw"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We specify a certain cloud probability threshold, and then only keep the images that fall below it. Here we are choosing a quite aggressive value of maximum 5% cloud probability...","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Kwg5aAc9o8"}],"key":"wMirZI3oF2"}],"visibility":"show","key":"shvHGHU3FU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# filter by maximum allowable cloud probability (in percent)\nMAX_CLOUD_PROB_ALONG_TRACK = 5\ncloudfree_collection = collection.filter(ee.Filter.lt('ground_track_cloud_prob', MAX_CLOUD_PROB_ALONG_TRACK))\nprint('There are %i cloud-free scenes.' % cloudfree_collection.size().getInfo())","visibility":"show","key":"owRKk8DlfK"},{"type":"output","id":"tPR_59D1dPO9fzM8kD781","data":[],"visibility":"show","key":"ML2PQyqefq"}],"visibility":"show","key":"u3Nx5GpoTM"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sort the collection by time difference from the ICESat-2 overpass","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"srYWBMLu3j"}],"identifier":"sort-the-collection-by-time-difference-from-the-icesat-2-overpass","label":"Sort the collection by time difference from the ICESat-2 overpass","html_id":"sort-the-collection-by-time-difference-from-the-icesat-2-overpass","implicit":true,"key":"dePmjoAK2l"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Using the image property ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"p1YxJWdWSn"},{"type":"inlineCode","value":"'system:time_start'","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zkFl8kU2AU"},{"type":"text","value":" we can calculate the time difference from the ICESat-2 overpass and set it as a property. This allows us to sort the collection by it and to make sure that the first image in the collection is the closest-in-time to ICESat-2 image that is also cloud-free.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Nl3Kqhziht"}],"key":"hgELSqXaJC"}],"key":"hvcppa2NRc"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# get the time difference between ICESat-2 overpass and Sentinel-2 acquisitions, set as image property\nis2time = is2data.date + 'T12:00:00'\ndef set_time_difference(img, is2time=is2time):\n    timediff = ee.Date(is2time).difference(img.get('system:time_start'), 'second').abs()\n    return img.set('timediff', timediff)\ncloudfree_collection = cloudfree_collection.map(set_time_difference).sort('timediff')","visibility":"show","key":"lV71zIANT8"},{"type":"output","id":"EYqBpIqrcBJBiuPWVt8t5","data":[],"visibility":"show","key":"N7TzKsnS94"}],"visibility":"show","key":"nSqGcOzsHe"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Print some stats for the final collection to make sure everything looks alright.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Pc5Wve4Pzy"}],"key":"v8zfaEhlBf"}],"key":"TIjw2iSboQ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"info = cloudfree_collection.getInfo()\nfor feature in info['features']:\n    s2datetime = datetime.fromtimestamp(feature['properties']['system:time_start']/1e3)\n    is2datetime = datetime.strptime(is2time, '%Y-%m-%dT%H:%M:%S')\n    timediff = s2datetime - is2datetime\n    timediff -= timedelta(microseconds=timediff.microseconds)\n    diffsign = 'before' if timediff \u003c timedelta(0) else 'after'\n    print('%s --\u003e along-track cloud probability: %5.1f %%, %s %7s ICESat-2' % (feature['properties']['GRANULE_ID'],\n              feature['properties']['ground_track_cloud_prob'],np.abs(timediff), diffsign))","visibility":"show","key":"OmRcjf3y4d"},{"type":"output","id":"CmFVk-d7Ld_XOChS4-XEU","data":[],"visibility":"show","key":"xFK3RiWL2q"}],"visibility":"show","key":"lIa4g9GGA8"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show the final image and ground track on the map","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CV7m5u9pen"}],"identifier":"show-the-final-image-and-ground-track-on-the-map","label":"Show the final image and ground track on the map","html_id":"show-the-final-image-and-ground-track-on-the-map","implicit":true,"key":"CacUP8nBVv"}],"key":"GgtHFCOuUf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"first_image_rgb = cloudfree_collection.first().select('B4', 'B3', 'B2')\nMap = geemap.Map(layout=Layout(width='70%', max_height='450px'))\nMap.add_basemap('SATELLITE')\nMap.addLayer(first_image_rgb, vis_params, name='my image')\nMap.addLayer(gtx_feature,{'color': 'red'},'ground track')\nMap.centerObject(gtx_feature, zoom=12)\nMap","visibility":"show","key":"eLEVMpfwGE"},{"type":"output","id":"GJ0E-oRSH8-zKDXyzQX_k","data":[],"visibility":"show","key":"CRbyNJYPuj"}],"visibility":"show","key":"JHC2HQ7BGT"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Download images from Earth Engine","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kpYcEgf13l"}],"identifier":"download-images-from-earth-engine","label":"Download images from Earth Engine","html_id":"download-images-from-earth-engine","implicit":true,"key":"U68gBm4xRB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We can use ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IrMyvBHmuY"},{"type":"link","url":"https://developers.google.com/earth-engine/apidocs/ee-image-getdownloadurl","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":".getDownloadUrl()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"atGrG6R1xM"}],"urlSource":"https://developers.google.com/earth-engine/apidocs/ee-image-getdownloadurl","key":"XFavjqvMb8"},{"type":"text","value":" on an Earth Engine image.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BWEvi2jdC4"}],"key":"t2V55cMGUI"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"It asks for a scale, which is just the pixel size in meters (10 m for Sentinel-2 visible bands). It also asks for the region we would like to export; here we use a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"et6Vv5CQsr"},{"type":"link","url":"https://developers.google.com/earth-engine/apidocs/ee-geometry-buffer","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":".buffer","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SD06cAwI2W"}],"urlSource":"https://developers.google.com/earth-engine/apidocs/ee-geometry-buffer","key":"GLyATivXQF"},{"type":"text","value":" around the center.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BDPixJ9o9a"}],"key":"jdEoElrfNl"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"(Note: This function can only be effectively used for small download jobs because there is a request size limit. Here, we only download a small region around the ground track, and convert the image to an 8-bit RGB composite to keep file size low. For larger jobs you should use ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gLEeorwWmo"},{"type":"link","url":"https://developers.google.com/earth-engine/apidocs/export-image-todrive","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"Export.image.toDrive","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"QPwiMvfPZ2"}],"urlSource":"https://developers.google.com/earth-engine/apidocs/export-image-todrive","key":"FUEwd8y7Aw"},{"type":"text","value":")","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WGbaUITAJU"}],"key":"i7HZuDKE0u"}],"key":"NQnMpGIbOp"}],"key":"PDOXipbJSR"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# create a region around the ground track over which to download data\npoint_of_interest = ee.Geometry.Point(center_lon, center_lat)\nbuffer_around_center_meters = ground_track_length*0.52\nregion_of_interest = point_of_interest.buffer(buffer_around_center_meters)\n\n# make the image 8-bit RGB\ns2rgb = first_image_rgb.unitScale(ee.Number(0), ee.Number(10000)).clamp(0.0, 1.0).multiply(255.0).uint8()\n\n# get the download URL\ndownloadURL = s2rgb.getDownloadUrl({'name': 'mySatelliteImage',\n                                          'crs': s2rgb.projection().crs(),\n                                          'scale': 10,\n                                          'region': region_of_interest,\n                                          'filePerBand': False,\n                                          'format': 'GEO_TIFF'})\ndownloadURL","visibility":"show","key":"iMLFHWws6S"},{"type":"output","id":"fdTEA2k5_KJOrdxdFWbhG","data":[],"visibility":"show","key":"JNJUDn88tc"}],"visibility":"show","key":"UztZOgFbKy"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can save the content of the download URL with the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pFjGIn7oi8"},{"type":"link","url":"https://docs.python-requests.org/en/latest/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"requests","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lh4QlRhYOC"}],"urlSource":"https://docs.python-requests.org/en/latest/","key":"Bs3oHjBcmh"},{"type":"text","value":" library.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RO0ls1HZf1"}],"key":"yCkNDNzSeZ"}],"key":"dkoS1FdOLp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"response = requests.get(downloadURL)\nfilename = 'my-satellite-image.tif'\nwith open(filename, 'wb') as f:\n    f.write(response.content)\nprint('Downloaded %s' % filename)","visibility":"show","key":"dkJEGdpRhg"},{"type":"output","id":"RQhNmO6IAh2u75yZ97HbF","data":[],"visibility":"show","key":"ye0XN7nFJU"}],"visibility":"show","key":"kbvXY4kjkP"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open a GeoTIFF in rasterio","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ya9lgEWoJL"}],"identifier":"open-a-geotiff-in-rasterio","label":"Open a GeoTIFF in rasterio","html_id":"open-a-geotiff-in-rasterio","implicit":true,"key":"vpI9RRSaFg"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now that we have saved the file, we can open it locally with the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"XPGDiJHwk8"},{"type":"link","url":"https://rasterio.readthedocs.io/en/latest/intro.html","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"rasterio","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BVePHgAO7w"}],"urlSource":"https://rasterio.readthedocs.io/en/latest/intro.html","key":"v6VtSNmsfp"},{"type":"text","value":" library.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"SjVN6GbC7A"}],"key":"viyj6gSOH2"}],"key":"T3tyDiW8lj"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"myImage = rio.open(filename)\nmyImage","visibility":"show","key":"apUCv22pC7"},{"type":"output","id":"mKgBZ1xLEvltYmJGS0RT4","data":[],"visibility":"show","key":"zTeoDXSuCz"}],"visibility":"show","key":"wb3R9rgMXN"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a GeoTIFF in Matplotlib","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TNigVgsu3u"}],"identifier":"plot-a-geotiff-in-matplotlib","label":"Plot a GeoTIFF in Matplotlib","html_id":"plot-a-geotiff-in-matplotlib","implicit":true,"key":"G8IFPFwFVg"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now we can easily plot the image in a matplotlib figure, just using the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"VZBfnFHP1r"},{"type":"link","url":"https://rasterio.readthedocs.io/en/latest/api/rasterio.plot.html","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"rasterio.plot()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sEqpa6furj"}],"urlSource":"https://rasterio.readthedocs.io/en/latest/api/rasterio.plot.html","key":"OwbPOu2Hkk"},{"type":"text","value":" module.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GjUV0AC56B"}],"key":"p0ucZtCw9t"}],"key":"tATupfyLfr"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=[4,4])\nrioplot.show(myImage, ax=ax);","visibility":"show","key":"Ln3a2JtK8t"},{"type":"output","id":"zVT0X5gtYTw13Pm45tbL2","data":[],"visibility":"show","key":"pDIcOtY1qS"}],"visibility":"show","key":"CZgzUsFuTf"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"transform the ground track into the image CRS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rEqA7mpqQ3"}],"identifier":"transform-the-ground-track-into-the-image-crs","label":"transform the ground track into the image CRS","html_id":"transform-the-ground-track-into-the-image-crs","implicit":true,"key":"gJTXFzgZas"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Because our plot is now in the Antarctic Polar Stereographic Coordrinate Reference System, we need to project the coordinates of the ground track from lon/lat values. The ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TekR5VemqQ"},{"type":"link","url":"https://rasterio.readthedocs.io/en/latest/api/rasterio.warp.html","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"rasterio.warp.transform","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jkqLdVISrk"}],"urlSource":"https://rasterio.readthedocs.io/en/latest/api/rasterio.warp.html","key":"dlvDX83uRS"},{"type":"text","value":" function has us covered. From then on, it’s just plotting in Matplotlib.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ho9qdXVnpK"}],"key":"jN3075bfUP"}],"key":"PcGKaGoMes"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gtx_x, gtx_y = warp.transform(src_crs='epsg:4326', dst_crs=myImage.crs, xs=is2data.atl08.lon, ys=is2data.atl08.lat)\nax.plot(gtx_x, gtx_y, color='red', linestyle='-')\nax.axis('off')","visibility":"show","key":"DplLLrq4Za"},{"type":"output","id":"70mbpI6xZgQyTlaYOitvH","data":[],"visibility":"show","key":"SAETU5keKY"}],"visibility":"show","key":"fzL2WqJ7mQ"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Putting it all together","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pO5gUQIrHO"}],"identifier":"putting-it-all-together","label":"Putting it all together","html_id":"putting-it-all-together","implicit":true,"key":"U0wbD0JiYo"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The code above is found more concisely in one more method:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sWIbYzaipN"}],"key":"h3uaFolCTS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"dataCollector.visualize_sentinel2()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TT7oVUlvlV"}],"key":"G7onTIBdrG"}],"key":"SCP9807CSQ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This one has some default parameters, which you can change when running it:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bWrpHHMaKK"}],"key":"bzYKYS55of"},{"type":"code","lang":"","value":"- max_cloud_prob = 20\n- days_buffer = 10\n- gamma_value = 1.8\n- title = 'ICESat-2 data'\n- imagery_filename = 'my-satellite-image.tif'\n- plot_filename = 'my-plot.jpg'","position":{"start":{"line":6,"column":1},"end":{"line":13,"column":1}},"key":"UzmQXvmem8"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"We can now do everything we did in this tutorial in just three lines!","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"y7FfyneHXv"}],"key":"VuwA8YTDKS"}],"key":"DihgNo6KaZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"url = 'http://openaltimetry.org/data/api/icesat2/atl03?date=2021-08-22\u0026minx=-23.989069717620517\u0026miny=77.53261687779506\u0026maxx=-23.950348700496775\u0026maxy=77.57222464044443\u0026trackId=909\u0026beamName=gt1r\u0026beamName=gt1l\u0026outputFormat=json'\nis2data = dataCollector(oaurl=url,beam='gt1r')\nfig = is2data.visualize_sentinel2(max_cloud_prob=5, title='some ICESat-2 data with a Sentinel-2 image')","visibility":"show","key":"yjn9OwmuvJ"},{"type":"output","id":"7h8GMvQLw2hYwpu39Fjt7","data":[],"visibility":"show","key":"Bfq46vJ9KJ"}],"visibility":"show","key":"NvXgj8dQlv"},{"type":"block","kind":"notebook-content","data":{"tags":[],"user_expressions":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"And now we can also easily run this on some totally different data!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jSjnNj7F2D"}],"key":"Jz4u0ULFF4"}],"key":"xUz0R9zrp3"}],"visibility":"show","key":"dYm0qCELOr"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"url = 'http://openaltimetry.org/data/api/icesat2/atl12?date=2020-12-15\u0026minx=-77.858681\u0026miny=25.728091\u0026maxx=-77.831461\u0026maxy=25.832559\u0026trackId=1254\u0026beamName=gt1r\u0026beamName=gt1l\u0026outputFormat=json'\nmydata = dataCollector(oaurl=url, beam='gt1r')\nfig = mydata.visualize_sentinel2(max_cloud_prob=20,\n                                 title='Nearshore Bathymetry ICESat-2 Data', \n                                 imagery_filename='my-other-satellite-image.tif',\n                                 plot_filename='nearshore-bathymetry.jpg')","visibility":"show","key":"N6mgUiXGKe"},{"type":"output","id":"hJRozcLXZOyrK4oIazEEj","data":[],"visibility":"show","key":"yFAyxicRYp"}],"visibility":"show","key":"x9RlfvVY8j"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exercise","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"adLEDmyhU1"}],"identifier":"exercise","label":"Exercise","html_id":"exercise","implicit":true,"key":"j5gu6gA9PU"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Find some data from ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Z9HdrEgrGl"},{"type":"link","url":"https://openaltimetry.org/data/icesat2/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"OpenAltimetry","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sKk6mzPyq4"}],"urlSource":"https://openaltimetry.org/data/icesat2/","key":"vC9Ev7l7oK"},{"type":"text","value":", and plot it with a cloud-free satellite image.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BlgH4AZesm"}],"key":"KIQJoPO6uI"}],"key":"f87l9kvYT5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Look for ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"wURAEWDkaC"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"small-scale features","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"eyRfac5SDz"}],"key":"uPHDtbLQob"},{"type":"text","value":" - say a few hundred meters to 20 kilometers along-track. (","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jsaJJeGljT"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Hint: OpenAltimetry has a scale bar.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Snu9uihsfY"}],"key":"mKYivmO694"},{"type":"text","value":")","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uuz6jjEkUW"}],"key":"F73QWkGEwN"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Bonus points for features where concurrent imagery and the ATL03 photon cloud may give us some information that we would not get from higher-level products alone!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KlkVCD1yk7"}],"key":"NiGDzvFptP"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"NLRmFtjaj1"}],"key":"r2VDyFITX7"},{"type":"text","value":" There is no Sentinel-2 coverage at higher latitudes than ~84°, and there will be no concurrent imagery during polar night.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WYFpbUP5Sz"}],"key":"x2MMSgq99L"}],"key":"SvgF21Ea3a"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"If you don’t know where to start with OpenAltimetry, you can look ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"pz82JwHw28"},{"type":"link","url":"http://openaltimetry.org/data/icesat2/?annoId=579\u0026shareKey=2f894202007966614f6a751fe892c436","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"LRNsAh2fqi"}],"urlSource":"http://openaltimetry.org/data/icesat2/?annoId=579\u0026shareKey=2f894202007966614f6a751fe892c436","key":"ClwqugEVyB"},{"type":"text","value":".","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WSzTBa8C2j"}],"key":"YLXF9p9gL5"}],"key":"ybCqVavFXy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"##### YOUR CODE GOES HERE - uncomment and edit it! \n# url = 'http://???.org/??'\n# gtx = 'gt??'\n# is2data = dataCollector(oaurl=url, beam=gtx)\n# fig = is2data.visualize_sentinel2(title='\u003cyour figure title goes here\u003e', \n#                                   imagery_filename='your-satellite-image.tif',\n#                                   plot_filename='your-plot.jpg')","key":"HOvfEbgItP"},{"type":"output","id":"OALAID9i0Q0LwJ8nZXtIW","data":[],"key":"QT8rD5UYot"}],"key":"AfGWg9fRSC"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LXbH4OO4aM"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"SNYCZL498C"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"🎉 Congratulations! You’ve completed this tutorial and have seen how we can put ICESat-2 photon-level data into context using Google Earth Engine and the OpenAltimetry API.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jpmu1zpzO9"}],"key":"M7zwGvKYYJ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"You can explore a few more use cases for this code (and possible solutions for Exercise 2) in ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Q0xEiNn3Fo"},{"type":"link","url":"./use_examples.ipynb","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"this notebook","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"A8zfVZi3GL"}],"urlSource":"./use_examples.ipynb","key":"HnopbWlT1S"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"E1zifVpxo7"}],"key":"eUt8u3otVS"}],"key":"gdD82PM2LE"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AfjQuOrnLQ"}],"identifier":"references","label":"References","html_id":"references","implicit":true,"key":"NifK8mbtLT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To further explore the topics of this tutorial see the following detailed documentation:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kChbG3yQcN"}],"key":"jzV3DN6oIY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://openaltimetry.org/data/swagger-ui/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The OpenAltimetry API","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GmVD2gEmhm"}],"urlSource":"https://openaltimetry.org/data/swagger-ui/","key":"W4QStoBqPR"}],"key":"HIBdfMFoku"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://developers.google.com/earth-engine/guides","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Google Earth Engine JavaScript and Python Guides","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"wW8gxVE0Jv"}],"urlSource":"https://developers.google.com/earth-engine/guides","key":"KyY5FtJNo1"}],"key":"KbhIgdmZQr"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://developers.google.com/earth-engine/tutorials/community/sentinel-2-s2cloudless","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Tutorial on Sentinel-2 cloud masking with s2cloudless","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FYIWgZiyYZ"}],"urlSource":"https://developers.google.com/earth-engine/tutorials/community/sentinel-2-s2cloudless","key":"swrdY6RKSc"}],"key":"VIJkVQxJqB"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://geemap.org/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The geemap package","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VttcswnqqM"}],"urlSource":"https://geemap.org/","key":"wIgYvUPmeP"},{"type":"text","value":" and ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"XDWbB8m96K"},{"type":"link","url":"https://geemap.org/tutorials/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"tutorials","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"P4i7k05uCj"}],"urlSource":"https://geemap.org/tutorials/","key":"wB79bdQVRk"}],"key":"J4Jv0UxDOq"}],"key":"U4A6pT5iA0"}],"key":"EwXWciijHd"},{"type":"block","kind":"notebook-content","data":{"user_expressions":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Bonus Material: Code for Extracting Along-Track Surface Reflectance Values","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H9s1bRMOsQ"}],"identifier":"bonus-material-code-for-extracting-along-track-surface-reflectance-values","label":"Bonus Material: Code for Extracting Along-Track Surface Reflectance Values","html_id":"bonus-material-code-for-extracting-along-track-surface-reflectance-values","implicit":true,"key":"WLv3ahYNII"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Based on javascript code in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YfMdXjg1DG"},{"type":"link","url":"https://developers.google.com/earth-engine/tutorials/community/extract-raster-values-for-points","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"this example","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zWEYINWhQw"}],"urlSource":"https://developers.google.com/earth-engine/tutorials/community/extract-raster-values-for-points","key":"yEWqMqWhVA"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DymwUrMWzw"}],"key":"do3cyEkGtd"}],"key":"VrQLpcQE4Z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# a function for buffering ICESat-2 along-track depth measurement locations by a footprint radius\ndef bufferPoints(radius, bounds=False):\n    def buffer(pt):\n        pt = ee.Feature(pt)\n        return pt.buffer(radius).bounds() if bounds else pt.buffer(radius)\n    return buffer\n\n# a function for extracting Sentinel-2 band data for ICESat-2 along-track depth measurement locations\ndef zonalStats(ic, fc, reducer=ee.Reducer.mean(), scale=None, crs=None, bands=None, bandsRename=None,\n               imgProps=None, imgPropsRename=None, datetimeName='datetime', datetimeFormat='YYYY-MM-dd HH:mm:ss'):\n\n    # Set default parameters based on an image representative.\n    imgRep = ic.first()\n    nonSystemImgProps = ee.Feature(None).copyProperties(imgRep).propertyNames()\n    if not bands:\n        bands = imgRep.bandNames()\n    if not bandsRename:\n        bandsRename = bands\n    if not imgProps:\n        imgProps = nonSystemImgProps\n    if not imgPropsRename:\n        imgPropsRename = imgProps\n\n    # Map the reduceRegions function over the image collection.\n    results = ic.map(lambda img: \n        img.select(bands, bandsRename)\n        .set(datetimeName, img.date().format(datetimeFormat))\n        .set('timestamp', img.get('system:time_start'))\n        .reduceRegions(collection=fc.filterBounds(img.geometry()),reducer=reducer,scale=scale,crs=crs)\n        .map(lambda f: f.set(img.toDictionary(imgProps).rename(imgProps,imgPropsRename)))\n    ).flatten().filter(ee.Filter.notNull(bandsRename))\n\n    return results","key":"ryU2nIvMHK"},{"type":"output","id":"Vi6GAR5gBitF7QIHCw3sw","data":[],"key":"AGLzX6JGDu"}],"key":"Xou7u6pjXS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ground_track_buffer = 7.5 # radius in meters, for a 15-m diameter footprint\nground_track_coordinates = list(zip(is2data.gt.lon, is2data.gt.lat))\ngtx_feature = ee.Geometry.LineString(coords=ground_track_coordinates, proj='EPSG:4326', geodesic=True)\naoi = gtx_feature.buffer(ground_track_buffer)\n\n# clip to the ground track for along-track querying\nimg_gt = cloudfree_collection.first().clip(aoi)\n\n# get the footprint-buffered query points from the lake object's depth_data dataframe\npts =  ee.FeatureCollection([\n    ee.Feature(ee.Geometry.Point([r.lon, r.lat]), {'plot_id': i}) for i,r in is2data.gt.iterrows()\n])\nptsS2 = pts.map(bufferPoints(ground_track_buffer))\n\n# query the Sentinel-2 bands at the ground track locations where lake depths are posted\nthiscoll = ee.ImageCollection([img_gt])\nbandNames = ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B8A', 'B9', 'B11', 'B12', 'probability']\nbandIdxs = list(range(len(bandNames)-1)) + [23]\nptsData = zonalStats(thiscoll, ptsS2, bands=bandIdxs, bandsRename=bandNames, imgProps=['PRODUCT_ID'], scale=5)\n\n# get the data to the client side and merge into the lake depth data frame\nfeatures_select = ['plot_id'] + bandNames\nresults = ptsData.select(features_select, retainGeometry=False).getInfo()['features']\ndata = [x[\"properties\"] for x in results]\ndfS2 = pd.DataFrame(data).set_index('plot_id')\ndf_bands = is2data.gt.join(dfS2, how='left')\n\n# calculate the Normalized Difference Water Index (NDWI)\ndf_bands['ndwi'] = (df_bands.B2-df_bands.B4) / (df_bands.B2+df_bands.B4)\n\ndf_bands","key":"uxeUdaCNHY"},{"type":"output","id":"Y9a5rsG0UT1Ja-MBvT6uP","data":[],"key":"g0Ff0pdrG4"}],"key":"viGvee6Lt5"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs = plt.subplots(figsize=[9,5], nrows=3, sharex=True)\nax = axs[0]\nax.scatter(is2data.atl03.lat, is2data.atl03.h, s=1, c='k', label='ATL03')\nax.set_ylim((741, 818))\nax.legend()\nax = axs[1]\nax.plot(df_bands.lat,df_bands.ndwi, c='b', label='NDWI')\nax.set_ylim((0, 1))\nax.legend()\nax = axs[2]\nscale = 1e-4\nax.plot(df_bands.lat,df_bands.B4*scale, c='r', label='B4')\nax.plot(df_bands.lat,df_bands.B3*scale, c='g', label='B3')\nax.plot(df_bands.lat,df_bands.B2*scale, c='b', label='B2')\nax.set_ylim((0, 1))\nax.legend()\nax.set_xlim((is2data.gt.lat.min(), is2data.gt.lat.max()))\nax.set_xlabel('latitude')","visibility":"show","key":"qjHK1DtVGJ"},{"type":"output","id":"AgGatTZLHcoCIVew9hLFb","data":[],"visibility":"show","key":"gFzRtx6oWy"}],"visibility":"show","key":"tlh7uWjR2E"}],"key":"XelGCRoaBC"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Machine Learning","url":"/notebooks/machine-learning","group":"Foundations"},"next":{"title":"Land Ice Applications","url":"/notebooks/land-ice","group":"Example Workflows"}}},"domain":"http://localhost:3000"},"project":{"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"title":"ICESat-2 Tutorials","authors":[{"nameParsed":{"literal":"ICESat-2 team","given":"ICESat-2","family":"team"},"name":"ICESat-2 team","id":"contributors-myst-generated-uid-0"}],"contributors":[{"id":"brian-rose","nameParsed":{"literal":"Brian E. J. Rose","given":"Brian E. J.","family":"Rose"},"name":"Brian E. J. Rose","orcid":"0000-0002-9961-3821","email":"brose@albany.edu","affiliations":["UAlbany"],"url":"https://brian-rose.github.io","github":"brian-rose","bluesky":"@brianejrose.bsky.social","linkedin":"https://www.linkedin.com/in/brian-rose-37bb55106/"},{"id":"clyne","nameParsed":{"literal":"John Clyne","given":"John","family":"Clyne"},"name":"John Clyne","orcid":"0000-0003-2788-9017","affiliations":["CISL"],"github":"clyne"},{"id":"jukent","nameParsed":{"literal":"Julia Kent","given":"Julia","family":"Kent"},"name":"Julia Kent","orcid":"0000-0002-5611-8986","affiliations":["CISL"],"github":"jukent"},{"id":"ktyle","nameParsed":{"literal":"Kevin Tyle","given":"Kevin","family":"Tyle"},"name":"Kevin Tyle","orcid":"0000-0001-5249-9665","affiliations":["UAlbany"],"github":"ktyle"},{"id":"andersy005","nameParsed":{"literal":"Anderson Banihirwe","given":"Anderson","family":"Banihirwe"},"name":"Anderson Banihirwe","orcid":"0000-0001-6583-571X","affiliations":["CarbonPlan"],"github":"andersy005"},{"id":"dcamron","nameParsed":{"literal":"Drew Camron","given":"Drew","family":"Camron"},"name":"Drew Camron","orcid":"0000-0001-7246-6502","affiliations":["Unidata"],"github":"dcamron"},{"id":"dopplershift","nameParsed":{"literal":"Ryan May","given":"Ryan","family":"May"},"name":"Ryan May","orcid":"0000-0003-2907-038X","affiliations":["Unidata"],"github":"dopplershift"},{"id":"mgrover1","nameParsed":{"literal":"Maxwell Grover","given":"Maxwell","family":"Grover"},"name":"Maxwell Grover","orcid":"0000-0002-0370-8974","affiliations":["Argonne"],"github":"mgrover1"},{"id":"r-ford","nameParsed":{"literal":"Robert R. Ford","given":"Robert R.","family":"Ford"},"name":"Robert R. Ford","orcid":"0000-0001-5483-4965","affiliations":["UAlbany"],"github":"r-ford"},{"id":"kmpaul","nameParsed":{"literal":"Kevin Paul","given":"Kevin","family":"Paul"},"name":"Kevin Paul","orcid":"0000-0001-8155-8038","affiliations":["NVIDIA"],"github":"kmpaul"},{"id":"jnmorley","nameParsed":{"literal":"James Morley","given":"James","family":"Morley"},"name":"James Morley","orcid":"0009-0005-5193-7981","github":"jnmorley"},{"id":"erogluorhan","nameParsed":{"literal":"Orhan Eroglu","given":"Orhan","family":"Eroglu"},"name":"Orhan Eroglu","orcid":"0000-0003-3099-8775","affiliations":["CISL"],"github":"erogluorhan"},{"id":"lkailynncar","nameParsed":{"literal":"Lily Kailyn","given":"Lily","family":"Kailyn"},"name":"Lily Kailyn","orcid":"0009-0002-0125-5091","affiliations":["CISL"],"github":"lkailynncar"},{"id":"anissa111","nameParsed":{"literal":"Anissa Zacharias","given":"Anissa","family":"Zacharias"},"name":"Anissa Zacharias","orcid":"0000-0002-2666-8493","affiliations":["CISL"],"github":"anissa111"},{"id":"kafitzgerald","nameParsed":{"literal":"Katelyn FitzGerald","given":"Katelyn","family":"FitzGerald"},"name":"Katelyn FitzGerald","orcid":"0000-0003-4184-1917","affiliations":["CISL"],"github":"kafitzgerald"}],"github":"https://github.com/ICESAT-2HackWeek/icesat2-cookbook","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"copyright":"2025","references":{"foundations":{"url":"https://foundations.projectpythia.org"},"xarray":{"url":"https://docs.xarray.dev/en/stable"},"matplotlib":{"url":"https://matplotlib.org/stable"}},"thebe":{"binder":{"url":"https://mybinder.org/","provider":"github","repo":"projectpythia/cookbook-template","ref":"HEAD"}},"toc":[{"file":"README.md"},{"children":[{"file":"notebooks/how-to-cite.md"}],"title":"Preamble"},{"children":[{"file":"notebooks/mission-overview.ipynb"},{"file":"notebooks/data-access.ipynb"},{"file":"notebooks/filtering.ipynb"},{"file":"notebooks/geospatial-transforms.ipynb"},{"file":"notebooks/data-integration.ipynb"},{"file":"notebooks/cloud-computing.ipynb"},{"file":"notebooks/machine-learning.ipynb"},{"file":"notebooks/visualization.ipynb"}],"title":"Foundations"},{"children":[{"file":"notebooks/land-ice.ipynb"},{"file":"notebooks/sea-ice.ipynb"},{"file":"notebooks/inland-hydrology.ipynb"},{"file":"notebooks/bathymetry.ipynb"},{"file":"notebooks/snowdepth.ipynb"}],"title":"Example Workflows"}],"thumbnail":"/icesat2-cookbook/_preview/7/build/7f613ecccd986df1d247a99280f744c5.jpeg","exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Preamble"},{"slug":"notebooks.how-to-cite","title":"How to Cite This Cookbook","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/72a08caa5cbe5f9cce5999dbd1a81dfd.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Foundations"},{"slug":"notebooks.mission-overview","title":"ICESat-2 Mission Overview","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/6658703fc36e20fd253169cb1ed19215.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.filtering","title":"Cloud effects on ICESat-2 data,  and Data Filtering","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/ATL06_segment_model-c5b1aad2cc8269892f6f9bddba8df3ad.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.geospatial-transforms","title":"Geospatial Transforms","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.data-integration","title":"Data Integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.cloud-computing","title":"Cloud Computing","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.machine-learning","title":"Machine Learning","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.visualization","title":"Interactive Visualizion with Open Altimetry \u0026 Google Earth Engine","description":"","date":"","thumbnail":"/icesat2-cookbook/_preview/7/build/b785ddce6158c1efca3b023af48fd454.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Example Workflows"},{"slug":"notebooks.land-ice","title":"Land Ice Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.sea-ice","title":"Sea Ice Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-hydrology","title":"Inland Hydrology Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.bathymetry","title":"Bathymetry Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.snowdepth","title":"Snowdepth Applications","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/icesat2-cookbook/_preview/7/build/manifest-B2B2E6A5.js";
import * as route0 from "/icesat2-cookbook/_preview/7/build/root-IB5726YR.js";
import * as route1 from "/icesat2-cookbook/_preview/7/build/routes/$-LXLHKVOR.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/icesat2-cookbook/_preview/7/build/entry.client-UNPC4GT3.js");</script></body></html>